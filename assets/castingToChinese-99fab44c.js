import{d as ne,y as le,B as se,C as ae,D as u,A as U,o as b,c as ie,w as r,h as T,H as X,u as e,a as l,g as s,I as a,b as me,K as ue,J as re,t as C,S as V,M as de,O as fe,N as ce,a4 as pe,P as ge,Q as Ce,j as we,am as Ve,af as he,aL as _e,k as ve,e as Ae,ae as xe}from"./vendor-5d3cd767.js";import{a as h}from"./overlay_plugin_api-409cb9ea.js";import{g as Ie}from"./actionChinese-b463e832.js";import{_ as ye}from"./index-247be567.js";const Se={};function De(_){return Se[_]}const ze={style:{width:"10rem"}},Ue={class:"noCSS"},be={class:"noCSS"},Te={class:"actionID"},Xe=ne({__name:"castingToChinese",setup(_){var A,x;le(i=>({"4870722d":e(k),"198325fe":e(B),"198325fc":e(K),"2f6c36b1":e(F),"3deba7d3":e(P),"4c2e611b":e(M),"4c2e611c":e(O),"08604655":e(L),"58d626a6":e(H),"58d626a4":e(j),"0f5d80e2":e($)}));const Y=new URLSearchParams(window.location.href.split("?")[1]);class E{constructor(t){const m=Ie(Number.parseInt(t[4],16));if(m)this.name=m;else{const f=De(t[4]);f?this.name=f:(console.log(`未找到动作${t[4]} - ${t[5]}的中文名`),this.name=`${t[5]}(${t[4]})`)}this.startTime=Date.now(),this.castTime=Number(t[8])*1e3,this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(t[4],16)}}const d=se({targetCast:void 0}),N=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],o=ae("castingToChinese",{width:283,showCountdown:!0,showProgress:!0,showActionChinese:!0,showActionID:!1,offsetCountdownX:2,offsetCountdownY:2,offsetActionChineseX:0,offsetActionChineseY:-2,offsetActionIDX:0,offsetActionIDY:35,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"},localStorage,{mergeDefaults:!0}),$=u(()=>`${o.value.width}px`),k=u(()=>o.value.showCountdown?1:0),F=u(()=>o.value.showProgress?1:0),P=u(()=>o.value.showActionChinese?1:0),L=u(()=>o.value.showActionID?1:0),B=u(()=>`${o.value.offsetCountdownX}px`),K=u(()=>`${o.value.offsetCountdownY}px`),M=u(()=>`${o.value.offsetActionChineseX}px`),O=u(()=>`${o.value.offsetActionChineseY}px`),H=u(()=>`${o.value.offsetActionIDX}px`),j=u(()=>`${o.value.offsetActionIDY}px`),p=new Map,g=U(0),w=o.value.ping,v=U(/^(?:1|true|on)$/i.test(Y.get("showSettings")||"")||((x=(A=document.getElementById("unlocked"))==null?void 0:A.style)==null?void 0:x.display)==="flex");h("EnmityTargetData",i=>{var t;d.targetCast=p.get((t=i[o.value.targetKey])==null?void 0:t.ID)}),h("LogLine",i=>{i.line[0]==="20"?p.set(Number.parseInt(i.line[2],16),new E(i.line)):i.line[0]==="23"&&p.delete(Number.parseInt(i.line[2],16))}),h("ChangeZone",()=>p.clear()),requestAnimationFrame(function i(){g.value=Date.now(),requestAnimationFrame(i)}),document.addEventListener("onOverlayStateUpdate",i=>{var t;v.value=((t=i==null?void 0:i.detail)==null?void 0:t.isLocked)===!1});function q(){localStorage.removeItem("castingToChinese"),location.reload()}return(i,t)=>{const m=de,f=fe,R=ce,J=xe,Q=pe,W=ge,Z=Ce,G=we,I=Ve,y=he,ee=_e,oe=ve,te=Ae;return b(),ie(te,null,{default:r(()=>[T(l(G,{class:"settings"},{default:r(()=>[s("form",null,[a(" 宽度: "),l(m,{modelValue:e(o).width,"onUpdate:modelValue":t[0]||(t[0]=n=>e(o).width=n),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a("显示倒计时: "),l(f,{modelValue:e(o).showCountdown,"onUpdate:modelValue":t[1]||(t[1]=n=>e(o).showCountdown=n)},null,8,["modelValue"])]),s("form",null,[a("显示进度条: "),l(f,{modelValue:e(o).showProgress,"onUpdate:modelValue":t[2]||(t[2]=n=>e(o).showProgress=n)},null,8,["modelValue"])]),s("form",null,[a("显示中文: "),l(f,{modelValue:e(o).showActionChinese,"onUpdate:modelValue":t[3]||(t[3]=n=>e(o).showActionChinese=n)},null,8,["modelValue"])]),s("form",null,[a("显示ID: "),l(f,{modelValue:e(o).showActionID,"onUpdate:modelValue":t[4]||(t[4]=n=>e(o).showActionID=n)},null,8,["modelValue"])]),s("form",null,[a(" 延迟(ms): "),l(m,{modelValue:e(o).ping,"onUpdate:modelValue":t[5]||(t[5]=n=>e(o).ping=n),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" 保留(ms): "),l(m,{modelValue:e(o).keep,"onUpdate:modelValue":t[6]||(t[6]=n=>e(o).keep=n),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" 倒计时偏移X: "),l(m,{modelValue:e(o).offsetCountdownX,"onUpdate:modelValue":t[7]||(t[7]=n=>e(o).offsetCountdownX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),s("form",null,[a(" 倒计时偏移Y: "),l(m,{modelValue:e(o).offsetCountdownY,"onUpdate:modelValue":t[8]||(t[8]=n=>e(o).offsetCountdownY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" 中文偏移X: "),l(m,{modelValue:e(o).offsetActionChineseX,"onUpdate:modelValue":t[9]||(t[9]=n=>e(o).offsetActionChineseX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),s("form",null,[a(" 中文偏移Y: "),l(m,{modelValue:e(o).offsetActionChineseY,"onUpdate:modelValue":t[10]||(t[10]=n=>e(o).offsetActionChineseY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" ID偏移X: "),l(m,{modelValue:e(o).offsetActionIDX,"onUpdate:modelValue":t[11]||(t[11]=n=>e(o).offsetActionIDX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),s("form",null,[a(" ID偏移Y: "),l(m,{modelValue:e(o).offsetActionIDY,"onUpdate:modelValue":t[12]||(t[12]=n=>e(o).offsetActionIDY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" 倒计时字号(px): "),l(m,{modelValue:e(o).fontSizeCountDown,"onUpdate:modelValue":t[13]||(t[13]=n=>e(o).fontSizeCountDown=n),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",null,[a(" 中文字号(px): "),l(m,{modelValue:e(o).fontSizeActionName,"onUpdate:modelValue":t[14]||(t[14]=n=>e(o).fontSizeActionName=n),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),s("form",ze,[a(" 字体: "),l(R,{modelValue:e(o).fontFamily,"onUpdate:modelValue":t[15]||(t[15]=n=>e(o).fontFamily=n),size:"small",clearable:"",onClear:t[16]||(t[16]=n=>e(o).fontFamily="SmartisanHei")},null,8,["modelValue"])]),s("form",Ue,[l(Q,{modelValue:e(o).targetKey,"onUpdate:modelValue":t[17]||(t[17]=n=>e(o).targetKey=n),placeholder:"Select",size:"small",teleported:!1},{default:r(()=>[(b(),me(re,null,ue(N,n=>l(J,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),s("form",be,[l(Z,{teleported:!1,title:"确定要重置？",onConfirm:q},{reference:r(()=>[l(W,null,{default:r(()=>[a("重置全部用户设置")]),_:1})]),_:1})])]),_:1},512),[[X,e(v)]]),T(l(oe,{style:V({fontFamily:e(o).fontFamily})},{default:r(()=>{var n,S;return[l(y,null,{default:r(()=>[l(I,{span:24,flex:"","justify-end":""},{default:r(()=>{var c;return[s("div",{style:V({fontSize:`${e(o).fontSizeCountDown}px`}),class:"countdown"},C(Math.max(((((c=e(d).targetCast)==null?void 0:c.overTime)??1)-e(g)-e(w))/1e3,0).toFixed(2)),5)]}),_:1})]),_:1}),l(ee,{percentage:Math.min((e(g)-(((n=e(d).targetCast)==null?void 0:n.startTime)??1)+e(w))/(((S=e(d).targetCast)==null?void 0:S.castTime)??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),l(y,null,{default:r(()=>[l(I,{span:24,class:"action"},{default:r(()=>{var c,D,z;return[s("div",Te,C((c=e(d).targetCast)==null?void 0:c.actionId)+"("+C((D=e(d).targetCast)==null?void 0:D.actionId.toString(16).toUpperCase())+") ",1),s("div",{style:V({fontSize:`${e(o).fontSizeActionName}px`}),class:"actionChinese"},C((z=e(d).targetCast)==null?void 0:z.name),5)]}),_:1})]),_:1})]}),_:1},8,["style"]),[[X,e(d).targetCast&&e(g)-e(d).targetCast.overTime+e(w)<e(o).keep]])]),_:1})}}});const ke=ye(Xe,[["__scopeId","data-v-11909740"]]);export{ke as default};
