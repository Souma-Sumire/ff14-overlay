import{d as U,n as b,q as C,r as T,o as i,e as d,a as _,w as g,x as A,F as v,L as h,u as c,s as I,P as O,y as z,v as B,aQ as E}from"./vendor-9c3ca848.js";import{U as a}from"./util-831b56e7.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const N={flex:"~ col",style:{position:"relative"}},M=U({__name:"DragJob",props:{party:{}},emits:["updateSortArr"],setup(x,{emit:y}){const f=x,k=y,j=b(),J=b(!0),u=b(!1),p=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];function w(e){return f.party.find(r=>r.job===e)}const V=a.getBattleJobs3(),n=(()=>{const e={},r={tank:a.isTankJob,healer:a.isHealerJob,dps:a.isDpsJob,crafter:a.isCraftingJob,gatherer:a.isGatheringJob};for(const t of p.map(o=>o.role))e[t]=(t==="none"?[]:V.filter(o=>r[t](o))).map(o=>a.jobToJobEnum(o)).sort((o,m)=>a.enumSortMethod(o,m));return e})(),L=Object.values(n).flat().map(e=>({name:a.nameToFullName(a.jobEnumToJob(e)).simple1,id:e})),s=C("cactbotRuntime-jobList",(()=>{const e={};for(const r of p.map(t=>t.role))e[r]=L.filter(t=>n[r].includes(t.id)).sort((t,o)=>n[r].indexOf(t.id)-n[r].indexOf(o.id));return e})());s.value.dps.findIndex(e=>e.id===41)===-1&&s.value.dps.push({name:"蛇",id:41}),s.value.dps.findIndex(e=>e.id===42)===-1&&s.value.dps.push({name:"绘",id:42});function D(){k("updateSortArr",Object.values(s.value).flat().map(e=>e.id))}return(e,r)=>{const t=T("vxe-checkbox");return i(),d("div",N,[_(t,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o),size:"mini",style:{"--vxe-primary-color":"none",position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white","border-radius":"0.25rem",padding:"0.08rem 0.16rem","font-size":"0.75rem","line-height":"1","box-shadow":"0 0 2px black"}},{default:g(()=>[A(" 解除限制 ")]),_:1},8,["modelValue"]),(i(),d(v,null,h(p,(o,m)=>_(c(E),{key:m,ref_for:!0,ref_key:"el",ref:j,modelValue:c(s)[o.role],"onUpdate:modelValue":l=>c(s)[o.role]=l,disabled:!J.value,animation:"150","ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:D},{default:g(()=>[(i(!0),d(v,null,h(c(s)[o.role],l=>I((i(),d("div",{key:l.id,class:O(`${u.value||w(l.id)?`draggable bg-${o.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75"} rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white`)},z(l.name),3)),[[B,f.party.find(S=>S.job===36)?!0:l.id!==36]])),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])),64))])}}});const G=F(M,[["__scopeId","data-v-b26c04a4"]]);export{G as _};
