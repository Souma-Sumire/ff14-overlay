import{d as _,v as g,B as w,at as y,o as k,b as $,f as d,p as x,j as E}from"./vendor-052ff5d9.js";import{_ as I}from"./index-66fd7128.js";const L=e=>(x("data-v-8006715c"),e=e(),E(),e),D={class:"upload select"},F=L(()=>d("div",{class:"upload text"},[d("span",null,"+"),d("p",null,"上传或拖入ACT日志")],-1)),A=_({__name:"testLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:a}){const t=a,s=g(null),n=g(null),i=async c=>{var o,p;(o=n.value)==null||o.classList.remove("drag");const r=c.target.files;if(!(!r||r.length===0)){t("beforeHandle");for(let l=0;l<r.length;l++){const v=await r[l].text();for(const h of v.split(`
`))t("handleLine",h)}t("afterHandle"),(p=n.value)==null||p.classList.remove("drag")}},u=c=>{var r;c.preventDefault(),(r=n.value)==null||r.classList.add("drag")},f=c=>{var r;c.preventDefault(),(r=n.value)==null||r.classList.remove("drag")};return w(()=>{var c,r,o;(c=s.value)==null||c.addEventListener("change",i),(r=n.value)==null||r.addEventListener("dragover",u),(o=n.value)==null||o.addEventListener("dragleave",f)}),y(()=>{var c,r,o;(c=s.value)==null||c.removeEventListener("change",i),(r=n.value)==null||r.removeEventListener("dragover",u),(o=n.value)==null||o.removeEventListener("dragleave",f)}),(c,r)=>(k(),$("div",D,[d("div",{class:"upload-select",ref_key:"select",ref:n},[F,d("input",{type:"file",ref_key:"input",ref:s},null,512)],512)]))}});const q=I(A,[["__scopeId","data-v-8006715c"]]);function z(e){switch(e){case"dodge":return"闪避";case"damage done":return"击中";case"blocked damage":return"格挡";case"parried damage":return"招架";case"instant death":return"即死";case"heal":return"治疗";case"crit heal":return"暴击治疗";case"damage":return"普通";case"crit damage":return"暴击";case"direct hit damage":return"直击";case"crit direct hit damage":return"直暴";case"physics":return"物理";case"magic":return"魔法";case"darkness":return"暗黑";default:throw new Error("Unknown type")}}function G(e){const a=C(e),t=H(e),s=B(e);return{effect:a,properties:t,type:s}}function C(e){switch(!0){case/1$/.test(e):return"dodge";case/3$/.test(e):return"damage done";case/5$/.test(e):return"blocked damage";case/6$/.test(e):return"parried damage";case/33$/.test(e):return"instant death";case/4$/.test(e):return"heal";case/2\w{4}4$/.test(e):return"crit heal";default:throw new Error("Unknown effect flag "+e)}}function H(e){switch(!0){case/2\w{3}$/.test(e):return"crit damage";case/4\w{3}$/.test(e):return"direct hit damage";case/6\w{3}$/.test(e):return"crit direct hit damage";default:return"damage"}}function B(e){switch(!0){case/7?[1234]\w{3}[35]$|[16]$/.test(e):return"physics";case/^E$/.test(e):case/5\w{4}$/.test(e):return"magic";case/^(?:\d0)?3$/.test(e):case/6\w{4}$/.test(e):return"darkness";default:return console.error("Unknown type flag "+e),"physics"}}const S=["3E","113","213","313"],U=["A10","E"],T=["04"],V="36",O=["01","03","05","06",V],J=e=>{let t=0,s=e[8]??"",n=e[8+1]??"";S.includes(s)&&(t+=2,s=e[8+t]??s,n=e[8+t+1]??n),U.includes(s)&&(t+=2,s=e[8+t]??s,n=e[8+t+1]??n);const i=P(n),u=`00${s}`.slice(-2);return{amount:i,lowByte:u,flags:s,isHeal:T.includes(u),isAttack:O.includes(u)}},P=e=>{if(e===void 0)return 0;const a=e.length;if(a<=4)return 0;let t=parseInt(e.slice(0,a-4),16);if(e[a-4]==="4"){const s=parseInt(e.slice(a-2,a),16);t=t-s+(s<<16)}return t},m=(()=>typeof structuredClone=="function"?structuredClone:e=>{if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Array)return e.map(t=>m(t));const a=new e.constructor;for(const t in e)e.hasOwnProperty(t)&&(a[t]=m(e[t]));return a})();export{q as a,G as b,m as d,J as p,z as t};
