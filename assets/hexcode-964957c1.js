import{d as M,A as x,C as N,a0 as k,o as _,b as m,h as I,at as S,u as r,g as o,a3 as $,t as p,I as z,J as D,K as H,p as J,l as K,S as O}from"./vendor-45f31e92.js";import{_ as R}from"./index-e4d28112.js";const B=u=>(J("data-v-72a1ed51"),u=u(),K(),u),W=B(()=>o("h2",null,"UTF8长度计算",-1)),j=["innerHTML"],q=B(()=>o("h2",null,p("<hex:02开头检测"),-1)),G=M({__name:"hexcode",setup(u){const f=x(""),g=x(0),c=N("hexcode",""),d=x([]);k(()=>{g.value=v(f.value)});function v(l){let e=0;for(let t=0;t<l.length;t++){const s=l.charCodeAt(t);s<128?e+=1:s<2048?e+=2:s<65536?e+=3:s<2097152&&(e+=4)}return e}function L(l){let e=0;const t=[];for(;e<l.length;){const s=l.indexOf("<hex:02",e);if(s===-1||(e=s+1,l.slice(e-1,e+9)==="<hex:0203>"))break;const C=l.slice(e+6,e+8),y=l.slice(e+8,e+10),F=Number.parseInt(y,16),U=`指令${C} 长度${y}(${F})`;let a=0,b=0,h=!0,i=!0;for(;b<F;a++){const n=l[s+a+11],E=l.slice(s+a+11,s+a+11+5);if(n===void 0)break;if(n==="<"&&(h=!0,i=!1),!(h&&!i)){if(!(n===">"&&i)){if(!(n==="<"&&E==="<hex:")){const A=v(n);b+=h?A/2:A}}}n===":"&&(i=!0),n===">"&&(h=!1,i=!1)}const w=l.slice(e+a+3,e+a+11),V=l.slice(e+10,e+10+a);t.push({passed:w.endsWith("03>"),over:w,msg:U,full:V})}return t}k(()=>{d.value.length=0,c.value.split(`
`).forEach(l=>{const e=L(l);d.value.push(...e)})});function T(l){return l.replaceAll("<hex:024804F201F803><hex:024904F201F903>",'<span style="color:#00cc22;">').replaceAll("<hex:024804F201FA03><hex:024904F201FB03>",'<span style="color:#ffff66;">').replaceAll("<hex:0249020103><hex:0248020103>","</span>").replaceAll("<hex:02100103>","<br>").replaceAll("<hex:024804F201F403><hex:024904F201F503>",'<span style="color:#ff7b1a;">').replaceAll(/(<)(hex:[^>]+)(>)/g,"&lt;$2&gt;")}return(l,e)=>(_(),m("main",null,[W,I(o("textarea",{id:"","onUpdate:modelValue":e[0]||(e[0]=t=>$(f)?f.value=t:null),name:"",cols:"100",rows:"5",wrap:"off"},null,512),[[S,r(f)]]),o("p",null,p(r(g)),1),o("div",{style:{"min-height":"2em",height:"100%",width:"35em",border:"1px solid #ccc",padding:"0.5em","background-color":"#333",color:"white","font-family":"'宋体'","font-size":"16px"},innerHTML:T(r(c))},null,8,j),q,I(o("textarea",{id:"","onUpdate:modelValue":e[1]||(e[1]=t=>$(c)?c.value=t:null),name:"",cols:"100",rows:"5"},null,512),[[S,r(c)]]),o("article",null,[z(p(r(d).every(t=>t.passed)?"全部通过":"有错误")+" ",1),o("ul",null,[(_(!0),m(D,null,H(r(d),(t,s)=>(_(),m("li",{key:s},[o("span",{style:O({color:t.passed?"black":"red"})},p(`${t.passed?"通过":"错误"} ${t.msg} ${t.full}`),5)]))),128))])])]))}});const Y=R(G,[["__scopeId","data-v-72a1ed51"]]);export{Y as default};
