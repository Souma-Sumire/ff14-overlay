import{d as K,A as u,C as R,a0 as B,o as _,b as F,h as b,at as y,u as o,g as s,a3 as k,I as $,t as i,J as X,K as O,aJ as W,p as j,l as q,S as G}from"./vendor-5d3cd767.js";import{_ as P}from"./index-0e7a2e29.js";const L=f=>(j("data-v-722c60ce"),f=f(),q(),f),Q=L(()=>s("h2",null,"UTF8长度计算",-1)),Y=L(()=>s("h2",null,i("指令码检测（不包括FFXX>）"),-1)),Z=["innerHTML"],ee=K({__name:"hexcode",setup(f){const d=u(""),h=u(""),m=u(0),g=u(0),n=R("hexcode",""),x=u([]),w=u("");B(()=>{m.value=A(d.value),g.value=A(h.value),w.value=(m.value-g.value).toString(16).toUpperCase()});function A(t){let e=0;for(let l=0;l<t.length;l++){const a=t.charCodeAt(l);a<128?e+=1:a<2048?e+=2:a<65536?e+=3:a<2097152&&(e+=4)}return e}function V(t){let e=0;const l=[];for(;e<t.length;){const a=t.indexOf("<hex:02",e);if(a===-1||(e=a+1,t.slice(e-1,e+9)==="<hex:0203>"))break;const N=t.slice(e+6,e+8),S=t.slice(e+8,e+10),C=Number.parseInt(S,16),z=`指令${N} 长度${S}(${C})`;let c=0,I=0,v=!0,p=!0;for(;I<C;c++){const r=t[a+c+11],J=t.slice(a+c+11,a+c+11+5);if(r===void 0)break;if(r==="<"&&(v=!0,p=!1),!(v&&!p)){if(!(r===">"&&p)){if(!(r==="<"&&J==="<hex:")){const U=A(r);I+=v?U/2:U}}}r===":"&&(p=!0),r===">"&&(v=!1,p=!1)}const T=t.slice(e+c+3,e+c+11),D=t.slice(e+10,e+10+c);l.push({passed:T.endsWith("03>"),over:T,msg:z,full:D})}return l}B(()=>{x.value.length=0,n.value.split(`
`).forEach(t=>{const e=V(t);x.value.push(...e)})});function E(t){return t.replaceAll("<hex:024804F201F803><hex:024904F201F903>",'<span style="color:#00cc22;">').replaceAll("<hex:024804F201FA03><hex:024904F201FB03>",'<span style="color:#ffff66;">').replaceAll("<hex:0249020103><hex:0248020103>","</span>").replaceAll("<hex:02100103>","<br>").replaceAll("<hex:024804F201F403><hex:024904F201F503>",'<span style="color:#ff7b1a;">').replaceAll(/(<)(hex:[^>]+)(>)/g,"&lt;$2&gt;")}function H(){W(()=>{n.value=n.value.replaceAll(/\n/g,"<hex:02100103>")})}function M(){n.value=n.value.replaceAll("追加","追加").replaceAll("効果時間","持续时间").replaceAll("時間","时间").replaceAll("効果","效果").replaceAll("発動確率","发动几率").replaceAll("発動条件","发动条件").replace(/^対象に([火水氷雷风土光暗])属性魔法攻撃。/,"对目标发动$1属性魔法攻击").replace(/^対象とその周囲の敵に([火水氷雷风土光暗])属性範囲魔法攻撃。/,"对目标及其周围的敌人发动$1属性范围魔法攻击").replace(/^対象とその周囲の敵に([火水氷雷风土光暗])属性範囲魔法攻撃。/,"对周围的敌人发动$1属性范围魔法攻击").replaceAll("氷","冰").replaceAll("自身の周囲の敵に範囲物理攻撃。","对自身周围的敌人发动范围物理攻击").replaceAll("対象に物理攻撃。","对目标发动物理攻击").replaceAll("回復力","恢复力").replaceAll("回復力","恢复力").replaceAll("対象のＨＰを継続回復する。","令目标体力持续恢复　　　　").replaceAll("自身のＨＰを継続回復する。","令自身体力持续恢复　　　　").replaceAll("クリティカルヒットやダイレクトヒットの発動率を上昇させる效果を受けている場合は与ダメージが上昇する。","受暴击或直击发动率提高效果影响时，攻击造成的伤害提高　　　　　　　　　　　　　　　　　　　　　　　　").replaceAll("の","的")}return(t,e)=>(_(),F("main",null,[Q,b(s("textarea",{id:"","onUpdate:modelValue":e[0]||(e[0]=l=>k(d)?d.value=l:null),name:"",cols:"100",rows:"1"},null,512),[[y,o(d)]]),$(" "+i(o(m))+" ",1),b(s("textarea",{id:"","onUpdate:modelValue":e[1]||(e[1]=l=>k(h)?h.value=l:null),name:"",cols:"100",rows:"1"},null,512),[[y,o(h)]]),$(" "+i(o(g))+" ",1),s("p",null,"UTF8长度差异（十六进制）："+i(o(w)),1),Y,s("div",{style:{"min-height":"2em",height:"100%",width:"35em",border:"1px solid #ccc",padding:"0.5em","background-color":"#333",color:"white","font-family":"'宋体'","font-size":"16px"},innerHTML:E(o(n))},null,8,Z),b(s("textarea",{id:"","onUpdate:modelValue":e[2]||(e[2]=l=>k(n)?n.value=l:null),"m-b-2":"","m-t-2":"",name:"",cols:"100",rows:"5",onKeyup:H},null,544),[[y,o(n)]]),s("button",{onClick:M}," 一键替换日文 "),s("article",null,[$(i(o(x).every(l=>l.passed)?"02开头指令全部通过":"可能有错误")+" ",1),s("ul",null,[(_(!0),F(X,null,O(o(x),(l,a)=>(_(),F("li",{key:a},[s("span",{style:G({color:l.passed?"black":"red"})},i(`${l.passed?"通过":"错误"} ${l.msg} ${l.full}`),5)]))),128))])])]))}});const se=P(ee,[["__scopeId","data-v-722c60ce"]]);export{se as default};
