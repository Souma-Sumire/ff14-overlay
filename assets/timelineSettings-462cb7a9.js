import{d as we,v as B,x as ge,o as T,b as O,a as i,w as l,u as n,a0 as ce,F as v,t as P,f as p,C as X,D as ee,G as U,H as L,af as y,ag as re,K as be,ah as Be,L as De,M as he,ai as Oe,ad as ve,ae as Fe,ac as Te,a1 as xe,aj as Ue,c as A,ab as Ce,_ as fe,ak as Pe,A as ye,Y as Re,g as G,U as je,al as _e,h as ze,am as Je,a4 as qe,an as Me,ao as Le,i as We,e as Ke,p as Qe,j as Ye,J as He,ap as Ze}from"./vendor-ce6ce513.js";import{u as Se,p as Ge,_ as Xe}from"./TimelineShow-deb8a8bb.js";import{U as R}from"./util-f6d3a594.js";import{g as et}from"./actionChinese-71b7e526.js";import{_ as Ie}from"./index-57537645.js";import{Z as de}from"./zoneInfo-f2db0ac3.js";import{c as tt}from"./overlay_plugin_api-9faadcd6.js";import"./xivapi-40ad3cc5.js";import"./queryParams-77a1fad5.js";const r=new Map;r.set(26155,{type:"cast",window:[999,999]});r.set(28027,{type:"cast",window:[999,999]});r.set(26340,{type:"cast",window:[999,999]});r.set(25533,{type:"begincast",window:[60,60]});r.set(26376,{type:"cast",window:[999,999]});r.set(26814,{type:"begincast",window:[999,999]});r.set(25313,{type:"begincast",window:[200,200]});r.set(27526,{type:"begincast",window:[999,999]});r.set(26215,{type:"cast",window:[500,30]});r.set(29050,{type:"begincast",window:[200,30]});r.set(29156,{type:"cast",window:[20,20]});r.set(27973,{type:"cast",window:[20,20]});r.set(27937,{type:"begincast",window:[20,20]});r.set(28059,{type:"begincast",window:[20,20]});r.set(28060,{type:"begincast",window:[20,20]});r.set(28061,{type:"begincast",window:[20,20]});r.set(27956,{type:"begincast",window:[20,20]});r.set(27957,{type:"begincast",window:[20,20]});r.set(27952,{type:"begincast",window:[30,30]});r.set(27969,{type:"begincast",window:[20,20]});r.set(27971,{type:"begincast",window:[20,20]});r.set(27939,{type:"begincast",window:[20,20]});r.set(27966,{type:"begincast",window:[20,20]});r.set(25316,{type:"begincast",window:[999,999]});r.set(25544,{type:"begincast",window:[10,10]});r.set(26379,{type:"begincast",window:[10,10]});r.set(31552,{type:"begincast",window:[30,30]});r.set(31573,{type:"begincast",window:[30,30]});r.set(31573,{type:"begincast",window:[30,30]});r.set(31617,{type:"begincast",window:[8,8]});r.set(31624,{type:"begincast",window:[30,30]});r.set(31649,{type:"begincast",window:[30,30]});r.set(18864,{type:"cast",window:[10,2.5],once:!0});r.set(18480,{type:"cast",window:[200,60],once:!0});r.set(18516,{type:"cast",window:[250,65],once:!0});r.set(18522,{type:"begincast",window:[500,500],once:!0});r.set(18552,{type:"begincast",window:[67,67],once:!0});r.set(18553,{type:"cast",window:[67,67],once:!0});r.set(19083,{type:"cast",window:[900,0],once:!0});function nt(I){const F=new Map;I.filter(o=>o.type==="begincast").map(o=>F.set(o.actionId,(F.get(o.actionId)??0)+1));for(const o of I){F.get(o.actionId)===1&&o.type==="begincast"&&(o.window=[12,12]);const _=r.get(o.actionId);(_==null?void 0:_.type)===o.type&&(o.window=_==null?void 0:_.window),o.syncOnce=!!(_!=null&&_.once)}return I}const it={class:"fflogs-query-result-friendlies"},lt=["src","onerror"],ot=we({__name:"FflogsImport",props:{filters:{}},emits:["newTimeline","showFFlogsToggle","clearCurrentlyTimeline","updateFilters"],setup(I,{emit:F}){const o=I,_=F,W=new RegExp("(?<=^|\\/)(?<code>[\\d\\w]{16,})\\/?#fight=(?<fight>\\d+|last)"),j={begincast:"14",cast:"1[56]"},x=B("查询"),N=B(""),m=B(!1),t=ge({});J();const V=Se();function z(C){var f;y.fire({text:"正在解析数据 (步骤1/3)",showConfirmButton:!1}),J(),x.value="正在请求";const d=C.match(W);V.settings.api?d?d?(t.code=((f=d.groups)==null?void 0:f.code)??"",re.get(`https://cn.fflogs.com/v1/report/fights/${t.code}?api_key=${V.settings.api}`).then(w=>{var b,h;t.bossIDs=w.data.enemies.filter(s=>s.type==="Boss").map(s=>s.id),t.fightIndex=(((b=d==null?void 0:d.groups)==null?void 0:b.fight)==="last"?w.data.fights.length:Number.parseInt(((h=d==null?void 0:d.groups)==null?void 0:h.fight)??"0"))-1;const c=w.data.fights[t.fightIndex];t.zoneID=c.zoneID,t.start=c.start_time,t.end=c.end_time,t.friendlies=w.data.friendlies.filter(s=>s.icon!=="LimitBreak"&&s.fights.find(D=>D.id===t.fightIndex+1)),x.value="查询",t.abilityFilterEvents.length=0,t.abilityFilterCandidate.length=0,y.fire("在列表中选择一名玩家")}).catch(w=>{y.fire({icon:"error",title:"Oops...(步骤1)",text:w}),x.value="查询"})):(y.fire({icon:"error",title:"url链接格式错误",footer:`验证规则：${W.toString().replaceAll(/\?<\w+>/g,"")}`}),x.value="查询"):(y.fire({icon:"error",title:"FF logs 战斗记录链接 未填写",footer:"例如：aaAAAAaAAAaAaa11#fight=18"}),x.value="查询"):(y.fire({icon:"error",title:"FF logs API Key 未填写",footer:'<a href="https://cn.fflogs.com/profile">点击这里，在最下方起名，然后获得你的V1 Client Key</a>'}),x.value="查询")}async function te(C){t.player=C,await ne().then(()=>{t.abilityFilterCandidate=t.abilityFilterEvents.reduce((d,f)=>(f.sourceIsFriendly&&!d.find(w=>w.actionId===f.actionId)&&d.push(f),d),[])}).catch(d=>{y.fire({icon:"error",title:"Oops...(步骤2)",text:d})})}async function ne(){y.fire({text:"正在解析数据，请耐心等待。(步骤2/3)",showConfirmButton:!1});const C=[];t.abilityFilterEvents.length=0;async function d(b){var h;await re.get(`https://cn.fflogs.com/v1/report/events/casts/${t.code}?start=${b}&end=${t.end}&hostility=0&sourceid=${(h=t.player)==null?void 0:h.id}&api_key=${V.settings.api}`).then(async s=>{C.push(...s.data.events),s.data.nextPageTimestamp&&s.data.nextPageTimestamp>0&&s.data.nextPageTimestamp<t.end&&await d(s.data.nextPageTimestamp)}).catch(s=>{y.fire({icon:"error",title:"Oops...(步骤3.1)",text:s})})}async function f(b,h){h>=0&&await re.get(`https://cn.fflogs.com/v1/report/events/casts/${t.code}?start=${b}&end=${t.end}&hostility=1&sourceid=${t.bossIDs[h]}&api_key=${V.settings.api}`).then(async s=>{C.push(...s.data.events),s.data.nextPageTimestamp&&s.data.nextPageTimestamp>0&&s.data.nextPageTimestamp<t.end&&await f(s.data.nextPageTimestamp,h),h<t.bossIDs.length-1&&await f(b,h+1)}).catch(s=>{y.fire({icon:"error",title:"Oops...(步骤3.2)",text:s})})}const w=await d(t.start),c=await f(t.start,0);await Promise.all([w,c]).then(()=>{var b,h;for(const s of C)s.type==="begincast"&&s.sourceIsFriendly||t.abilityFilterEvents.push({time:Number(((s.timestamp-t.start)/1e3).toFixed(1)),type:s.type,actionName:et(s.ability.guid)??s.ability.name,actionId:s.ability.guid,sourceIsFriendly:s.sourceIsFriendly,url:((b=s==null?void 0:s.ability)==null?void 0:b.abilityIcon.replace("-","/").replace(".png",""))??"000000/000405",window:void 0});(h=t.player)!=null&&h.icon&&o.filters[t.player.icon]&&(t.abilityFilterSelected=o.filters[t.player.icon]),y.fire("请在技能过滤器中选择需要的技能")})}function ie(){var C,d,f,w;y.fire({text:"正在解析数据 (步骤3/3)",showConfirmButton:!1}),(C=t.player)!=null&&C.icon&&_("updateFilters",(d=t.player)==null?void 0:d.icon,JSON.parse(JSON.stringify(t.abilityFilterSelected))),t.abilityFilterEvents=t.abilityFilterEvents.filter(c=>c.sourceIsFriendly&&t.abilityFilterSelected.includes(c.actionId)||!c.sourceIsFriendly).sort((c,b)=>c.time-b.time),t.abilityFilterEvents=nt(t.abilityFilterEvents),t.abilityFilterEventsAfterFilterRawTimeline=t.abilityFilterEvents.map(c=>c.sourceIsFriendly?`${c.time} "<${c.actionName}>~"${m.value?` tts "${c.actionName}"`:""}`:/^(?:攻击|attack|攻撃)$|^unknown/i.test(c.actionName)||c.type==="cast"&&c.window===void 0?`# ${c.time} "${c.actionName}"`:`${c.time} "${c.actionName}" sync /^.{14} \\w+ ${j[c.type]}:4.{7}:[^:]+:${c.actionId.toString(16).toUpperCase()}:/${c.window?` window ${c.window.join(",")}`:""}`).join(`
`),_("newTimeline",`导入${(f=t.player)==null?void 0:f.name}`,{zoneId:t.zoneID.toString(),job:((w=t.player)==null?void 0:w.icon)??"NONE"},t.abilityFilterEventsAfterFilterRawTimeline,`${t.code}#fight=${t.fightIndex+1}`),J(),_("showFFlogsToggle"),y.fire({position:"top-end",icon:"success",title:"已生成新时间轴",showConfirmButton:!1,timer:1500})}function J(){t.code="",t.fightIndex=0,t.start=0,t.end=0,t.friendlies=[],t.abilityFilterEvents=[],t.abilityFilterCandidate=[],t.abilityFilterSelected=[],t.abilityFilterEventsAfterFilterRawTimeline="",t.player=void 0,t.zoneID=0,t.bossIDs=[]}return(C,d)=>{const f=be,w=Be,c=De,b=he,h=Oe,s=ve,D=Fe,K=Te,le=Ce,oe=xe,u=Ue;return T(),O(U,null,[i(h,{inline:!0,class:"fflogs-query"},{default:l(()=>[i(w,{label:"FF logs 战斗",style:{width:"450px"}},{default:l(()=>[i(f,{modelValue:n(N),"onUpdate:modelValue":d[0]||(d[0]=e=>ce(N)?N.value=e:null),placeholder:"reports/AAAaAaAAaa1aA1aA#fight=3",autocomplete:"on"},null,8,["modelValue"])]),_:1}),i(w,{label:"FF logs V1 Key",style:{width:"450px"}},{default:l(()=>[i(f,{modelValue:n(V).settings.api,"onUpdate:modelValue":d[1]||(d[1]=e=>n(V).settings.api=e)},null,8,["modelValue"])]),_:1}),i(w,{label:"添加TTS",style:{width:"100px"}},{default:l(()=>[i(c,{modelValue:n(m),"onUpdate:modelValue":d[2]||(d[2]=e=>ce(m)?m.value=e:null)},null,8,["modelValue"])]),_:1}),i(w,null,{default:l(()=>[i(b,{disabled:n(x)==="正在请求",type:"primary",onClick:d[3]||(d[3]=e=>z(n(N)))},{default:l(()=>[v(P(n(x)),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),p("div",it,[i(K,null,{default:l(()=>[X(i(D,{data:n(t).friendlies.filter(e=>e.icon!=="NPC"),stripe:"",border:"",class:"fflogs-query-result-friendlies-list"},{default:l(()=>[i(s,{prop:"name",label:"玩家名称","min-width":"60px"}),i(s,{prop:"server",label:"服务器","min-width":"60px"}),i(s,{label:"职业","min-width":"60px"},{default:l(({row:e})=>[v(P(n(R).nameToFullName(n(R).jobEnumToJob(n(R).iconToJobEnum(e.icon))).cn),1)]),_:1}),i(s,{label:"选定","min-width":"20px"},{default:l(e=>[i(b,{type:"primary",size:"small",onClick:g=>te(e.row)},{default:l(()=>[v("选择")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[ee,n(t).abilityFilterEvents.length===0]])]),_:1}),X(i(K,{class:"fflogs-query-result-friendlies-ability-filter-select"},{default:l(()=>[i(u,{span:20},{default:l(()=>[i(oe,{modelValue:n(t).abilityFilterSelected,"onUpdate:modelValue":d[4]||(d[4]=e=>n(t).abilityFilterSelected=e),multiple:"",placeholder:"技能过滤器","fit-input-width":!0},{default:l(()=>[(T(!0),O(U,null,L(n(t).abilityFilterCandidate,e=>(T(),A(le,{class:"ability-filter-li",key:e.actionId,value:e.actionId,label:e.actionName},{default:l(()=>[p("img",{src:`https://cafemaker.wakingsands.com/i/${e.url}.png`,class:"ability-filter-li-icon",title:"",onerror:`javascript:this.src='https://xivapi.com/i/${e.url}.png';this.onerror=null;`},null,8,lt),v(P(e.actionName),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(u,{span:4},{default:l(()=>[i(b,{type:"success",onClick:d[5]||(d[5]=e=>ie())},{default:l(()=>[v("选择好了")]),_:1})]),_:1})]),_:1},512),[[ee,n(t).abilityFilterEvents.length>0]])])],64)}}});const st=Ie(ot,[["__scopeId","data-v-7852f2dc"]]),$=I=>(Qe("data-v-671141ec"),I=I(),Ye(),I),at=$(()=>p("br",null,null,-1)),rt=$(()=>p("br",null,null,-1)),dt={class:"slider-demo-block"},ct=$(()=>p("span",null,"模拟时间：",-1)),ut={class:"timeline-info-config"},mt=$(()=>p("span",null,"名称：",-1)),pt={class:"timeline-info-config"},ft=$(()=>p("span",null,"地图：",-1)),yt={class:"timeline-info-config"},_t=$(()=>p("span",null,"职业：",-1)),wt={class:"timeline-info-config"},gt=$(()=>p("span",null,"来源：",-1)),bt={class:"timeline-info-config"},ht=$(()=>p("span",null,"创建：",-1)),vt={style:{flex:"1"}},Ft={style:{"max-height":"353px"}},Tt={class:"timeline-timeline-view"},xt=$(()=>p("br",null,null,-1)),Ct=$(()=>p("br",null,null,-1)),St=we({__name:"timelineSettings",setup(I){const F=B(0),o=Se(),_=fe(o,"allTimelines"),W=fe(o,"filters"),j=[{id:"0",name:"任意"}],x=B(!1),N=B(!1),m=ge({timeline:{name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}}),t=location.href.includes("OVERLAY_WS="),V=B([]);f();async function z(){V.value=[{time:0,action:"正在加载...",show:!0,windowBefore:0,windowAfter:0,alertAlready:!0}],V.value=await Ge(m.timeline.timeline)}const te=Pe(ye(()=>R.getBattleJobs2()),500,{maxWait:5e3});ne();function ne(){var u,e,g;for(const E in de)if(Object.prototype.hasOwnProperty.call(de,E)){const k=de[E];switch(k.contentType){case 4:case 5:case 28:j.push({id:E,name:((u=k.name)==null?void 0:u.cn)??((e=k.name)==null?void 0:e.ja)??((g=k.name)==null?void 0:g.ja)??E})}}h(),o.sortTimelines(),s()}function ie(){tt({call:"broadcast",source:"soumuaTimelineSetting",msg:{store:o.$state}})}function J(){var u;(u=C({url:location.href}))!=null&&u.OVERLAY_WS?(ie(),y.fire({title:"已尝试进行通信,请检查ACT悬浮窗是否接收",text:"若无法通信，可将本页面直接添加到ACT悬浮窗进行编辑，设置将会自动保存。（编辑后刷新一下时间轴网页）"})):y.fire({icon:"error",title:"目前与ACT断开了连接。",text:'请启用ACT OverlayPlugin WSServer，并使本页面url参数中的端口号与其保持一致：OVERLAY_WS=ws://127.0.0.1:端口号/ws"'})}function C({url:u}){var E,k;const e=(k=(E=u.split("?"))==null?void 0:E.pop())==null?void 0:k.split("&"),g={};if(e)for(const Q of e){const q=Q.split("=");g[q[0]]=q[1]}return g}function d(){x.value=!x.value,f()}function f(){F.value=-30,m.timeline={name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}}function w(){m.timeline=o.allTimelines[o.newTimeline()],z()}function c(u){window.scrollTo({top:0,behavior:"smooth"}),m.timeline=u,z()}function b(u){y.fire({title:`确定要删除${u.name}吗？`,text:"这将无法撤回！",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确认删除",cancelButtonText:"取消"}).then(e=>{e.isConfirmed&&(f(),_.value.splice(_.value.findIndex(g=>g===u),1))})}function h(){o.loadTimelineSettings(),Reflect.deleteProperty(o.configValues,"refreshRateMs")}function s(){Re(()=>{o.saveTimelineSettings()},{flush:"post"})}function D(u){const e=new je(".export",{text:()=>JSON.stringify(u)});e.on("success",()=>{y.fire({position:"top-end",icon:"success",title:"复制成功，已写入剪切板。",showConfirmButton:!1,timer:1500}),e.destroy()}),e.on("error",()=>{y.fire("复制失败，请手动复制！",JSON.stringify([u])),e.destroy()})}function K(){y.fire({title:"输入导出的字符串",input:"text",returnInputValueOnDeny:!0,showDenyButton:!0,denyButtonText:"覆盖",showConfirmButton:!0,confirmButtonText:"追加",showCancelButton:!0,cancelButtonText:"放弃"}).then(u=>{if(u.isConfirmed||u.isDenied)try{u.isDenied?y.fire({title:"这将丢失目前拥有的所有数据，你确定要覆盖吗？",showConfirmButton:!1,showDenyButton:!0,denyButtonText:"确定覆盖",showCancelButton:!0,cancelButtonText:"取消"}).then(e=>{e.isDenied&&(o.allTimelines.length=0,o.allTimelines.push(...JSON.parse(u.value)),o.sortTimelines())}):(o.allTimelines.push(...JSON.parse(u.value)),o.sortTimelines())}catch(e){y.fire({icon:"error",title:"Oops...",text:e})}})}const le=ye(()=>`${(F.value<0?"-":"")+(Array(2).join("0")+(Math.floor(F.value/60)+(F.value<0?1:0))).slice(-2)}:${(Array(2).join("0")+Math.floor(F.value%60)).slice(-2)}`);function oe(){m.timeline.timeline=m.timeline.timeline.replaceAll(new RegExp("(?<=^|^#\\s*)(?<time>[:：\\d.]+)","gm"),(u,e)=>/^\d+[::]\d+(?:\.\d{1,2})?$/.test(u.toString())?_e.duration(`00:${u.toString()}`).as("seconds").toString():_e.utc(Number.parseFloat(u.toString())*1e3).format("mm:ss.S"))}return(u,e)=>{const g=he,E=ze,k=st,Q=He,q=Ze,ue=Je,Y=qe,Ve=Me,H=be,me=Ce,pe=xe,se=Te,$e=Xe,Z=ve,Ee=Fe,ke=Le,Ae=We,Ne=Ke;return T(),A(Ne,{class:"container"},{default:l(()=>[i(E,null,{default:l(()=>[i(g,{type:"primary",onClick:e[0]||(e[0]=a=>w())},{default:l(()=>[v("新建")]),_:1}),i(g,{onClick:e[1]||(e[1]=a=>d())},{default:l(()=>[v("从FFlogs导入")]),_:1}),i(g,{onClick:e[2]||(e[2]=a=>N.value=!n(N)),color:"#626aef",style:{color:"white"}},{default:l(()=>[v("样式设置")]),_:1}),i(g,{onClick:e[3]||(e[3]=a=>K())},{default:l(()=>[v("导入")]),_:1}),i(g,{class:"export",onClick:e[4]||(e[4]=a=>D(n(_)))},{default:l(()=>[v("全部导出")]),_:1}),n(t)?(T(),A(g,{key:0,type:"success",onClick:e[5]||(e[5]=a=>J())},{default:l(()=>[v("通过WS发送到悬浮窗")]),_:1})):G("",!0)]),_:1}),i(Ae,null,{default:l(()=>[n(x)?(T(),A(k,{key:0,filters:n(W),onClearCurrentlyTimeline:f,onShowFFlogsToggle:e[6]||(e[6]=()=>x.value=!n(x)),onNewTimeline:n(o).newTimeline,onUpdateFilters:n(o).updateFilters},null,8,["filters","onNewTimeline","onUpdateFilters"])):G("",!0),X(i(Y,{class:"box-card"},{default:l(()=>[i(ue,{title:"时间轴参数",size:"small",border:""},{default:l(()=>[(T(!0),O(U,null,L(n(o).configValues,(a,S,M)=>(T(),A(q,{key:M,label:n(o).configTranslate[S],"label-align":"right",width:"16em"},{default:l(()=>[i(Q,{min:0,step:.1,modelValue:n(o).configValues[S],"onUpdate:modelValue":ae=>n(o).configValues[S]=ae},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1}),at,i(ue,{size:"small",title:"时间轴样式",border:""},{default:l(()=>[(T(!0),O(U,null,L(n(o).showStyle,(a,S,M)=>(T(),A(q,{key:M,label:n(o).showStyleTranslate[S],"label-align":"right",width:"16em"},{default:l(()=>[i(Q,{min:0,step:.01,modelValue:n(o).showStyle[S],"onUpdate:modelValue":ae=>n(o).showStyle[S]=ae},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1},512),[[ee,n(N)]]),rt,X(i(Y,null,{default:l(()=>[p("div",dt,[ct,i(Ve,{modelValue:n(F),"onUpdate:modelValue":e[7]||(e[7]=a=>ce(F)?F.value=a:null),min:-30,max:1500,step:.1,"show-input":""},null,8,["modelValue"]),p("div",null,P(n(le)),1)]),i(se,{class:"timeline-info"},{default:l(()=>[p("div",null,[p("p",ut,[mt,i(H,{modelValue:n(m).timeline.name,"onUpdate:modelValue":e[8]||(e[8]=a=>n(m).timeline.name=a),class:"timeline-info-name"},null,8,["modelValue"])]),p("p",pt,[ft,i(pe,{modelValue:n(m).timeline.condition.zoneId,"onUpdate:modelValue":e[9]||(e[9]=a=>n(m).timeline.condition.zoneId=a),filterable:""},{default:l(()=>[(T(),O(U,null,L(j,a=>i(me,{key:a.id,label:a.name,value:a.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),p("p",yt,[_t,i(pe,{modelValue:n(m).timeline.condition.job,"onUpdate:modelValue":e[10]||(e[10]=a=>n(m).timeline.condition.job=a),required:"",placeholder:"职业"},{default:l(()=>[(T(!0),O(U,null,L(n(te),a=>(T(),A(me,{key:a,label:n(R).nameToFullName(a).cn,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),p("p",wt,[gt,i(H,{modelValue:n(m).timeline.codeFight,"onUpdate:modelValue":e[11]||(e[11]=a=>n(m).timeline.codeFight=a),disabled:""},null,8,["modelValue"])]),p("p",bt,[ht,i(H,{modelValue:n(m).timeline.create,"onUpdate:modelValue":e[12]||(e[12]=a=>n(m).timeline.create=a),disabled:""},null,8,["modelValue"])]),i(se,{"m-b-10px":""},{default:l(()=>[i(g,{span:12,class:"export",onClick:e[13]||(e[13]=a=>D([n(m).timeline]))},{default:l(()=>[v("单独导出")]),_:1}),i(g,{type:"primary",span:12,onClick:e[14]||(e[14]=a=>oe())},{default:l(()=>[v("切换时间")]),_:1})]),_:1}),i(se,null,{default:l(()=>[i(g,{span:12,type:"danger",onClick:e[15]||(e[15]=a=>b(n(m).timeline))},{default:l(()=>[v("删除")]),_:1}),i(g,{span:12,onClick:e[16]||(e[16]=a=>f())},{default:l(()=>[v("隐藏编辑界面")]),_:1})]),_:1})]),p("div",vt,[i(H,{class:"timeline-timeline-raw",modelValue:n(m).timeline.timeline,"onUpdate:modelValue":e[17]||(e[17]=a=>n(m).timeline.timeline=a),type:"textarea",rows:12,wrap:"off",placeholder:"请键入时间轴文本",style:{"max-width":"569px"},onChange:e[18]||(e[18]=a=>z())},null,8,["modelValue"])]),p("div",Ft,[p("div",Tt,[i($e,{config:n(o).configValues,lines:n(V),runtime:n(F),"show-style":n(o).showStyle},null,8,["config","lines","runtime","show-style"])])])]),_:1}),xt]),_:1},512),[[ee,n(m).timeline.create!=="空"]]),Ct,n(_).length>0?(T(),A(Y,{key:1},{default:l(()=>[i(Ee,{data:n(_),style:{width:"100%"},stripe:""},{default:l(()=>[i(Z,{prop:"name",label:"名称"}),i(Z,{prop:"conditon",label:"地图",sortable:""},{default:l(a=>{var S;return[v(P((S=j.find(M=>M.id===a.row.condition.zoneId))==null?void 0:S.name),1)]}),_:1}),i(Z,{prop:"conditon",label:"职业"},{default:l(a=>[v(P(n(R).nameToFullName(a.row.condition.job).cn),1)]),_:1}),i(Z,{fixed:"right",label:"操作",width:"100"},{default:l(a=>[i(g,{onClick:S=>c(a.row),type:"primary",size:"small"},{default:l(()=>[v("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):G("",!0),n(_).length===0?(T(),A(Y,{key:2},{default:l(()=>[i(ke,{description:"点击上方新建或导入一个时间轴吧~"})]),_:1})):G("",!0)]),_:1})]),_:1})}}});const Ot=Ie(St,[["__scopeId","data-v-671141ec"]]);export{Ot as default};
