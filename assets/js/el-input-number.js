import{be as se,z as me,a9 as Ce,H as b,aj as Y,ai as B,a7 as x,ah as k,d as te,af as Te,A as fe,r as j,a as Pe,am as be,c as N,bq as W,aa as he,br as ye,Q,o as Ne,bg as _e,f as u,g as w,w as ue,i as t,x as f,bs as U,k as X,l as z,n as V,bt as Be,bu as Ae,aD as K,Y as I,bv as Fe,bw as De,bx as R,a8 as ge,aq as Ie,K as Z,ar as re,M as Ve,aI as ce,J as ze,aJ as ee,by as Ke,bz as Me,au as Oe,a6 as $e,h as ae,p as le,t as ie,bA as Le,y as de,al as Ue,bB as ve}from"./index.js";import{E as Re,i as xe}from"./el-input.js";const Ye=100,qe=600,pe={beforeMount(r,C){const s=C.value,{interval:n=Ye,delay:A=qe}=se(s)?{}:s;let c,h;const i=()=>se(s)?s():s.handler(),g=()=>{h&&(clearTimeout(h),h=void 0),c&&(clearInterval(c),c=void 0)};r.addEventListener("mousedown",S=>{S.button===0&&(g(),i(),document.addEventListener("mouseup",()=>g(),{once:!0}),h=setTimeout(()=>{c=setInterval(()=>{i()},n)},A))})}},Ge=me({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Ce,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||b(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),He={[Y]:(r,C)=>C!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[B]:r=>b(r)||x(r),[k]:r=>b(r)||x(r)},Je=["aria-label","onKeydown"],We=["aria-label","onKeydown"],je=te({name:"ElInputNumber"}),Qe=te({...je,props:Ge,emits:He,setup(r,{expose:C,emit:s}){const n=r,{t:A}=Te(),c=fe("input-number"),h=j(),i=Pe({currentValue:n.modelValue,userInput:null}),{formItem:g}=be(),S=N(()=>b(n.modelValue)&&n.modelValue<=n.min),F=N(()=>b(n.modelValue)&&n.modelValue>=n.max),T=N(()=>{const e=_(n.step);return W(n.precision)?Math.max(_(n.modelValue),e):(e>n.precision,n.precision)}),M=N(()=>n.controls&&n.controlsPosition==="right"),q=he(),P=ye(),D=N(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(x(e))return"";if(b(e)){if(Number.isNaN(e))return"";W(n.precision)||(e=e.toFixed(n.precision))}return e}),d=(e,l)=>{if(W(l)&&(l=T.value),l===0)return Math.round(e);let o=String(e);const p=o.indexOf(".");if(p===-1||!o.replace(".","").split("")[p+l])return e;const H=o.length;return o.charAt(H-1)==="5"&&(o=`${o.slice(0,Math.max(0,H-1))}6`),Number.parseFloat(Number(o).toFixed(l))},_=e=>{if(x(e))return 0;const l=e.toString(),o=l.indexOf(".");let p=0;return o!==-1&&(p=l.length-o-1),p},O=(e,l=1)=>b(e)?d(e+n.step*l):i.currentValue,$=()=>{if(n.readonly||P.value||F.value)return;const e=Number(D.value)||0,l=O(e);v(l),s(B,i.currentValue)},L=()=>{if(n.readonly||P.value||S.value)return;const e=Number(D.value)||0,l=O(e,-1);v(l),s(B,i.currentValue)},a=(e,l)=>{const{max:o,min:p,step:m,precision:E,stepStrictly:H,valueOnClear:J}=n;o<p&&Ie("InputNumber","min should not be greater than max.");let y=Number(e);if(x(e)||Number.isNaN(y))return null;if(e===""){if(J===null)return null;y=Z(J)?{min:p,max:o}[J]:J}return H&&(y=d(Math.round(y/m)*m,E)),W(E)||(y=d(y,E)),(y>o||y<p)&&(y=y>o?o:p,l&&s(k,y)),y},v=(e,l=!0)=>{var o;const p=i.currentValue,m=a(e);if(!l){s(k,m);return}p!==m&&(i.userInput=null,s(k,m),s(Y,m,p),n.validateEvent&&((o=g==null?void 0:g.validate)==null||o.call(g,"change").catch(E=>re())),i.currentValue=m)},ne=e=>{i.userInput=e;const l=e===""?null:Number(e);s(B,l),v(l,!1)},G=e=>{const l=e!==""?Number(e):"";(b(l)&&!Number.isNaN(l)||e==="")&&v(l),i.userInput=null},we=()=>{var e,l;(l=(e=h.value)==null?void 0:e.focus)==null||l.call(e)},Se=()=>{var e,l;(l=(e=h.value)==null?void 0:e.blur)==null||l.call(e)},Ee=e=>{s("focus",e)},ke=e=>{var l;s("blur",e),n.validateEvent&&((l=g==null?void 0:g.validate)==null||l.call(g,"blur").catch(o=>re()))};return Q(()=>n.modelValue,e=>{const l=a(i.userInput),o=a(e,!0);!b(l)&&(!l||l!==o)&&(i.currentValue=o,i.userInput=null)},{immediate:!0}),Ne(()=>{var e;const{min:l,max:o,modelValue:p}=n,m=(e=h.value)==null?void 0:e.input;if(m.setAttribute("role","spinbutton"),Number.isFinite(o)?m.setAttribute("aria-valuemax",String(o)):m.removeAttribute("aria-valuemax"),Number.isFinite(l)?m.setAttribute("aria-valuemin",String(l)):m.removeAttribute("aria-valuemin"),m.setAttribute("aria-valuenow",String(i.currentValue)),m.setAttribute("aria-disabled",String(P.value)),!b(p)&&p!=null){let E=Number(p);Number.isNaN(E)&&(E=null),s(k,E)}}),_e(()=>{var e;const l=(e=h.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${i.currentValue}`)}),C({focus:we,blur:Se}),(e,l)=>(u(),w("div",{class:f([t(c).b(),t(c).m(t(q)),t(c).is("disabled",t(P)),t(c).is("without-controls",!e.controls),t(c).is("controls-right",t(M))]),onDragstart:l[1]||(l[1]=R(()=>{},["prevent"]))},[e.controls?ue((u(),w("span",{key:0,role:"button","aria-label":t(A)("el.inputNumber.decrease"),class:f([t(c).e("decrease"),t(c).is("disabled",t(S))]),onKeydown:U(L,["enter"])},[X(t(K),null,{default:z(()=>[t(M)?(u(),V(t(Be),{key:0})):(u(),V(t(Ae),{key:1}))]),_:1})],42,Je)),[[t(pe),L]]):I("v-if",!0),e.controls?ue((u(),w("span",{key:1,role:"button","aria-label":t(A)("el.inputNumber.increase"),class:f([t(c).e("increase"),t(c).is("disabled",t(F))]),onKeydown:U($,["enter"])},[X(t(K),null,{default:z(()=>[t(M)?(u(),V(t(Fe),{key:0})):(u(),V(t(De),{key:1}))]),_:1})],42,We)),[[t(pe),$]]):I("v-if",!0),X(t(Re),{id:e.id,ref_key:"input",ref:h,type:"number",step:e.step,"model-value":t(D),placeholder:e.placeholder,readonly:e.readonly,disabled:t(P),size:t(q),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:l[0]||(l[0]=R(()=>{},["prevent"])),onKeydown:[U(R($,["prevent"]),["up"]),U(R(L,["prevent"]),["down"])],onBlur:ke,onFocus:Ee,onInput:ne,onChange:G},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Xe=ge(Qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const dt=Ve(Xe),Ze=me({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:ce},inactiveIcon:{type:ce},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:ze(Function)},size:{type:String,validator:xe},tabindex:{type:[String,Number]}}),et={[k]:r=>ee(r)||Z(r)||b(r),[Y]:r=>ee(r)||Z(r)||b(r),[B]:r=>ee(r)||Z(r)||b(r)},tt=["onClick"],nt=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],at=["aria-hidden"],lt=["aria-hidden"],it=["aria-hidden"],oe="ElSwitch",rt=te({name:oe}),ot=te({...rt,props:Ze,emits:et,setup(r,{expose:C,emit:s}){const n=r,A=Ke(),{formItem:c}=be(),h=he(),i=fe("switch");Me({from:'"value"',replacement:'"model-value" or "v-model"',scope:oe,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},N(()=>{var a;return!!((a=A.vnode.props)!=null&&a.value)}));const{inputId:g}=Oe(n,{formItemContext:c}),S=ye(N(()=>n.loading)),F=j(n.modelValue!==!1),T=j(),M=j(),q=N(()=>[i.b(),i.m(h.value),i.is("disabled",S.value),i.is("checked",d.value)]),P=N(()=>({width:$e(n.width)}));Q(()=>n.modelValue,()=>{F.value=!0}),Q(()=>n.value,()=>{F.value=!1});const D=N(()=>F.value?n.modelValue:n.value),d=N(()=>D.value===n.activeValue);[n.activeValue,n.inactiveValue].includes(D.value)||(s(k,n.inactiveValue),s(Y,n.inactiveValue),s(B,n.inactiveValue)),Q(d,a=>{var v;T.value.checked=a,n.validateEvent&&((v=c==null?void 0:c.validate)==null||v.call(c,"change").catch(ne=>re()))});const _=()=>{const a=d.value?n.inactiveValue:n.activeValue;s(k,a),s(Y,a),s(B,a),Ue(()=>{T.value.checked=d.value})},O=()=>{if(S.value)return;const{beforeChange:a}=n;if(!a){_();return}const v=a();[ve(v),ee(v)].includes(!0)||Ie(oe,"beforeChange must return type `Promise<boolean>` or `boolean`"),ve(v)?v.then(G=>{G&&_()}).catch(G=>{}):v&&_()},$=N(()=>i.cssVarBlock({...n.activeColor?{"on-color":n.activeColor}:null,...n.inactiveColor?{"off-color":n.inactiveColor}:null,...n.borderColor?{"border-color":n.borderColor}:null})),L=()=>{var a,v;(v=(a=T.value)==null?void 0:a.focus)==null||v.call(a)};return Ne(()=>{T.value.checked=d.value}),C({focus:L,checked:d}),(a,v)=>(u(),w("div",{class:f(t(q)),style:de(t($)),onClick:R(O,["prevent"])},[ae("input",{id:t(g),ref_key:"input",ref:T,class:f(t(i).e("input")),type:"checkbox",role:"switch","aria-checked":t(d),"aria-disabled":t(S),name:a.name,"true-value":a.activeValue,"false-value":a.inactiveValue,disabled:t(S),tabindex:a.tabindex,onChange:_,onKeydown:U(O,["enter"])},null,42,nt),!a.inlinePrompt&&(a.inactiveIcon||a.inactiveText)?(u(),w("span",{key:0,class:f([t(i).e("label"),t(i).em("label","left"),t(i).is("active",!t(d))])},[a.inactiveIcon?(u(),V(t(K),{key:0},{default:z(()=>[(u(),V(le(a.inactiveIcon)))]),_:1})):I("v-if",!0),!a.inactiveIcon&&a.inactiveText?(u(),w("span",{key:1,"aria-hidden":t(d)},ie(a.inactiveText),9,at)):I("v-if",!0)],2)):I("v-if",!0),ae("span",{ref_key:"core",ref:M,class:f(t(i).e("core")),style:de(t(P))},[a.inlinePrompt?(u(),w("div",{key:0,class:f(t(i).e("inner"))},[a.activeIcon||a.inactiveIcon?(u(),V(t(K),{key:0,class:f(t(i).is("icon"))},{default:z(()=>[(u(),V(le(t(d)?a.activeIcon:a.inactiveIcon)))]),_:1},8,["class"])):a.activeText||a.inactiveText?(u(),w("span",{key:1,class:f(t(i).is("text")),"aria-hidden":!t(d)},ie(t(d)?a.activeText:a.inactiveText),11,lt)):I("v-if",!0)],2)):I("v-if",!0),ae("div",{class:f(t(i).e("action"))},[a.loading?(u(),V(t(K),{key:0,class:f(t(i).is("loading"))},{default:z(()=>[X(t(Le))]),_:1},8,["class"])):I("v-if",!0)],2)],6),!a.inlinePrompt&&(a.activeIcon||a.activeText)?(u(),w("span",{key:1,class:f([t(i).e("label"),t(i).em("label","right"),t(i).is("active",t(d))])},[a.activeIcon?(u(),V(t(K),{key:0},{default:z(()=>[(u(),V(le(a.activeIcon)))]),_:1})):I("v-if",!0),!a.activeIcon&&a.activeText?(u(),w("span",{key:1,"aria-hidden":!t(d)},ie(a.activeText),9,it)):I("v-if",!0)],2)):I("v-if",!0)],14,tt))}});var st=ge(ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const vt=Ve(st);export{dt as E,vt as a};
//# sourceMappingURL=el-input-number.js.map
