import{d as X,u as Y,r as x,a as _,b as j,c as s,o as q,e as T,f as v,g as V,h as a,w as G,v as H,i as e,j as u,k as r,l as y,F as U,m as J,n as K,t as S,p as Q,E as R,q as Z,s as $,x as ll,y as el}from"./index.js";import{E as tl}from"./el-popconfirm.js";/* empty css          */import{E as ol,a as nl}from"./el-input-number.js";import{E as al}from"./el-input.js";import{_ as sl}from"./_plugin-vue_export-helper.js";const E=f=>(Z("data-v-c7699ce9"),f=f(),$(),f),ul={class:"dnc-overlay"},rl={class:"settings"},il=E(()=>a("br",null,null,-1)),ml=E(()=>a("br",null,null,-1)),dl=X({__name:"dnc",setup(f){var z,C;Y(n=>({"3ee73704":e(P),"047568dc":e(O),"7f32e098":e(B),fbe222ea:e(I),def697a8:e(F),"153a4f52":e(A),a61551de:e(D)}));let p=x(0);const i=_({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),l=j("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),c=x(((C=(z=document.getElementById("unlocked"))==null?void 0:z.style)==null?void 0:C.display)==="flex"),L=_([{id:"combo",cd:s(()=>30-Math.floor((p.value-i.lastCombo)/1e3)),style:{top:s(()=>l.value.combo.top+"px"),left:s(()=>l.value.combo.left+"px")}},{id:"tr3",cd:s(()=>30-Math.floor((p.value-i.status.get("A85"))/1e3)),style:{top:s(()=>l.value.tr3.top+"px"),left:s(()=>l.value.tr3.left+"px")}},{id:"tr4",cd:s(()=>30-Math.floor((p.value-i.status.get("A86"))/1e3)),style:{top:s(()=>l.value.tr4.top+"px"),left:s(()=>l.value.tr4.left+"px")}},{id:"fl3",cd:s(()=>30-Math.floor((p.value-i.status.get("BC9"))/1e3)),style:{top:s(()=>l.value.tr3.top+l.value.fl.top+"px"),left:s(()=>l.value.tr3.left+l.value.fl.left+"px")}},{id:"fl4",cd:s(()=>30-Math.floor((p.value-i.status.get("BCA"))/1e3)),style:{top:s(()=>l.value.tr4.top+l.value.fl.top+"px"),left:s(()=>l.value.tr4.left+l.value.fl.left+"px")}}]),B=s(()=>l.value.color),I=s(()=>l.value.shadow),A=s(()=>l.value.warncolor),D=s(()=>l.value.warnshadow),P=s(()=>l.value.fontFamily),F=s(()=>l.value.size+"px"),O=s(()=>l.value.fontWeight?"bold":"none"),h=s(()=>l.value.userCss);function g(n){n.line[5]===i.playerId&&(n.line[0]==="26"||n.line[0]==="30")&&i.status.has(n.line[2])?i.status.set(n.line[2],n.line[0]==="26"?Date.now():0):n.line[2]===i.playerId&&(n.line[0]==="21"||n.line[0]==="22")&&(n.line[4]==="3E79"&&n.line[0]==="22"||n.line[4]==="3E75"&&n.line[0]==="21"?i.lastCombo=Date.now():(n.line[4]==="3E76"||n.line[4]==="3E7A"||n.line[0]==="21"&&n.line[4]==="3E79")&&(i.lastCombo=0))}function w(){i.status.set("A85",0),i.status.set("A86",0),i.status.set("BC9",0),i.status.set("BCA",0),i.lastCombo=0}function b(n){i.playerId=n.charID.toString(16).toUpperCase()}function k(){localStorage.removeItem("jobs-dnc"),location.reload()}return q(()=>{addOverlayListener("onPlayerDied",w),addOverlayListener("LogLine",g),addOverlayListener("ChangePrimaryPlayer",b),startOverlayEvents(),document.addEventListener("onOverlayStateUpdate",n=>{var o;c.value=((o=n==null?void 0:n.detail)==null?void 0:o.isLocked)===!1})}),T(()=>{removeOverlayListener("onPlayerDied",w),removeOverlayListener("LogLine",g),removeOverlayListener("ChangePrimaryPlayer",b)}),requestAnimationFrame(function n(){p.value=Date.now(),requestAnimationFrame(n)}),(n,o)=>{const m=ol,d=al,M=nl,W=R,N=tl;return v(),V(U,null,[a("div",ul,[G(a("header",rl,[a("form",null,[u("连击X: "),r(m,{class:"input input-number",modelValue:e(l).combo.left,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).combo.left=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("连击Y: "),r(m,{class:"input input-number",modelValue:e(l).combo.top,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).combo.top=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("触发3X: "),r(m,{class:"input input-number",modelValue:e(l).tr3.left,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).tr3.left=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("触发3Y: "),r(m,{class:"input input-number",modelValue:e(l).tr3.top,"onUpdate:modelValue":o[3]||(o[3]=t=>e(l).tr3.top=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("触发4X: "),r(m,{class:"input input-number",modelValue:e(l).tr4.left,"onUpdate:modelValue":o[4]||(o[4]=t=>e(l).tr4.left=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("触发4Y: "),r(m,{class:"input input-number",modelValue:e(l).tr4.top,"onUpdate:modelValue":o[5]||(o[5]=t=>e(l).tr4.top=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("百花X: "),r(m,{class:"input input-number",modelValue:e(l).fl.left,"onUpdate:modelValue":o[6]||(o[6]=t=>e(l).fl.left=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("百花Y: "),r(m,{class:"input input-number",modelValue:e(l).fl.top,"onUpdate:modelValue":o[7]||(o[7]=t=>e(l).fl.top=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("剩余警告: "),r(m,{class:"input input-number",min:-1,max:30,modelValue:e(l).warn,"onUpdate:modelValue":o[8]||(o[8]=t=>e(l).warn=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("常规颜色: "),r(d,{class:"input input-string",modelValue:e(l).color,"onUpdate:modelValue":o[9]||(o[9]=t=>e(l).color=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("常规阴影: "),r(d,{class:"input input-string",modelValue:e(l).shadow,"onUpdate:modelValue":o[10]||(o[10]=t=>e(l).shadow=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("警告颜色: "),r(d,{class:"input input-string",modelValue:e(l).warncolor,"onUpdate:modelValue":o[11]||(o[11]=t=>e(l).warncolor=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("警告阴影: "),r(d,{class:"input input-string",modelValue:e(l).warnshadow,"onUpdate:modelValue":o[12]||(o[12]=t=>e(l).warnshadow=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("零值文本: "),r(d,{class:"input input-string",modelValue:e(l).zeroStr,"onUpdate:modelValue":o[13]||(o[13]=t=>e(l).zeroStr=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("字号: "),r(m,{class:"input input-number",modelValue:e(l).size,"onUpdate:modelValue":o[14]||(o[14]=t=>e(l).size=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("字体: "),r(d,{class:"input input-string",modelValue:e(l).fontFamily,"onUpdate:modelValue":o[15]||(o[15]=t=>e(l).fontFamily=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("粗体："),r(M,{modelValue:e(l).fontWeight,"onUpdate:modelValue":o[16]||(o[16]=t=>e(l).fontWeight=t),size:"small"},null,8,["modelValue"])]),a("form",null,[u("自定义CSS： "),il,r(d,{modelValue:e(l).userCss,"onUpdate:modelValue":o[17]||(o[17]=t=>e(l).userCss=t),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),ml,a("form",null,[r(N,{onConfirm:k,teleported:!1,title:"确定要重置？"},{reference:y(()=>[r(W,null,{default:y(()=>[u("重置全部用户设置")]),_:1})]),_:1})])],512),[[H,e(c)]]),a("main",null,[(v(!0),V(U,null,J(e(L),t=>(v(),V("div",{key:t.id},[a("span",{class:ll(t.cd<=e(l).warn&&!e(c)?"warning":""),style:el(t.style)},S(t.cd>=0?t.cd:e(c)?"30":e(l).zeroStr),7)]))),128))])]),(v(),K(Q("style"),null,{default:y(()=>[u(S(e(h)),1)]),_:1}))],64)}}});const gl=sl(dl,[["__scopeId","data-v-c7699ce9"]]);export{gl as default};
//# sourceMappingURL=dnc.js.map
