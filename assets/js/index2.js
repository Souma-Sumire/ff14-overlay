import{z as Ie,d as Q,A as Ve,c as y,H as ie,f,g as F,C as me,k as B,l as b,w as G,h,x as u,i as r,t as O,v as X,aE as ge,a8 as ve,M as De,al as q,ap as $e,aI as Fe,J as Be,bI as ye,bY as He,bZ as Ae,r as M,aC as se,o as Le,Q as ue,ak as Ue,bg as Ke,n as C,y as de,Y as T,aD as ce,p as j,F as qe,bw as Z,aF as Oe,bH as je,b_ as Te,K as te,I as ae,bd as J,b$ as oe,c0 as fe,c1 as Ze,E as Ge,bJ as Xe,a as Je,ae as we,e as Ye,as as Qe,aP as D,br as ne,j as re,c2 as Me,bB as We,bp as xe}from"./index.js";import{m as _e,E as en,i as nn}from"./el-input.js";import{E as sn,u as tn,a as on,b as an}from"./index3.js";const ln='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',rn=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Se=e=>Array.from(e.querySelectorAll(ln)).filter(n=>un(n)&&rn(n)),un=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},dn=Ie({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),cn=["textContent"],fn=Q({name:"ElBadge"}),pn=Q({...fn,props:dn,setup(e,{expose:n}){const s=e,a=Ve("badge"),o=y(()=>s.isDot?"":ie(s.value)&&ie(s.max)?s.max<s.value?`${s.max}+`:`${s.value}`:`${s.value}`);return n({content:o}),(l,d)=>(f(),F("div",{class:u(r(a).b())},[me(l.$slots,"default"),B(ge,{name:`${r(a).namespace.value}-zoom-in-center`,persisted:""},{default:b(()=>[G(h("sup",{class:u([r(a).e("content"),r(a).em("content",l.type),r(a).is("fixed",!!l.$slots.default),r(a).is("dot",l.isDot)]),textContent:O(r(o))},null,10,cn),[[X,!l.hidden&&(r(o)||l.isDot)]])]),_:1},8,["name"])],2))}});var mn=ve(pn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const gn=De(mn),pe="_trap-focus-children",z=[],ke=e=>{if(z.length===0)return;const n=z[z.length-1][pe];if(n.length>0&&e.code===$e.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const s=e.shiftKey,a=e.target===n[0],o=e.target===n[n.length-1];a&&s&&(e.preventDefault(),n[n.length-1].focus()),o&&!s&&(e.preventDefault(),n[0].focus())}},vn={beforeMount(e){e[pe]=Se(e),z.push(e),z.length<=1&&document.addEventListener("keydown",ke)},updated(e){q(()=>{e[pe]=Se(e)})},unmounted(){z.shift(),z.length===0&&document.removeEventListener("keydown",ke)}},ze=["success","info","warning","error"],v=_e({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:ye?document.body:void 0}),yn=Ie({customClass:{type:String,default:v.customClass},center:{type:Boolean,default:v.center},dangerouslyUseHTMLString:{type:Boolean,default:v.dangerouslyUseHTMLString},duration:{type:Number,default:v.duration},icon:{type:Fe,default:v.icon},id:{type:String,default:v.id},message:{type:Be([String,Object,Function]),default:v.message},onClose:{type:Be(Function),required:!1},showClose:{type:Boolean,default:v.showClose},type:{type:String,values:ze,default:v.type},offset:{type:Number,default:v.offset},zIndex:{type:Number,default:v.zIndex},grouping:{type:Boolean,default:v.grouping},repeatNum:{type:Number,default:v.repeatNum}}),bn={destroy:()=>!0},E=He([]),Cn=e=>{const n=E.findIndex(o=>o.id===e),s=E[n];let a;return n>0&&(a=E[n-1]),{current:s,prev:a}},hn=e=>{const{prev:n}=Cn(e);return n?n.vm.exposed.bottom.value:0},En=(e,n)=>E.findIndex(a=>a.id===e)>0?20:n,Bn=["id"],Tn=["innerHTML"],wn=Q({name:"ElMessage"}),Mn=Q({...wn,props:yn,emits:bn,setup(e,{expose:n}){const s=e,{Close:a}=Oe,{ns:o,zIndex:l}=Ae("message"),{currentZIndex:d,nextZIndex:m}=l,g=M(),t=M(!1),w=M(0);let $;const p=y(()=>s.type?s.type==="error"?"danger":s.type:"info"),le=y(()=>{const i=s.type;return{[o.bm("icon",i)]:i&&se[i]}}),W=y(()=>s.icon||se[s.type]||""),S=y(()=>hn(s.id)),K=y(()=>En(s.id,s.offset)+S.value),A=y(()=>w.value+K.value),R=y(()=>({top:`${K.value}px`,zIndex:d.value}));function N(){s.duration!==0&&({stop:$}=je(()=>{P()},s.duration))}function x(){$==null||$()}function P(){t.value=!1}function L({code:i}){i===$e.esc&&P()}return Le(()=>{N(),m(),t.value=!0}),ue(()=>s.repeatNum,()=>{x(),N()}),Ue(document,"keydown",L),Ke(g,()=>{w.value=g.value.getBoundingClientRect().height}),n({visible:t,bottom:A,close:P}),(i,_)=>(f(),C(ge,{name:r(o).b("fade"),onBeforeLeave:i.onClose,onAfterLeave:_[0]||(_[0]=be=>i.$emit("destroy")),persisted:""},{default:b(()=>[G(h("div",{id:i.id,ref_key:"messageRef",ref:g,class:u([r(o).b(),{[r(o).m(i.type)]:i.type&&!i.icon},r(o).is("center",i.center),r(o).is("closable",i.showClose),i.customClass]),style:de(r(R)),role:"alert",onMouseenter:x,onMouseleave:N},[i.repeatNum>1?(f(),C(r(gn),{key:0,value:i.repeatNum,type:r(p),class:u(r(o).e("badge"))},null,8,["value","type","class"])):T("v-if",!0),r(W)?(f(),C(r(ce),{key:1,class:u([r(o).e("icon"),r(le)])},{default:b(()=>[(f(),C(j(r(W))))]),_:1},8,["class"])):T("v-if",!0),me(i.$slots,"default",{},()=>[i.dangerouslyUseHTMLString?(f(),F(qe,{key:1},[T(" Caution here, message could've been compromised, never use user's input as message "),h("p",{class:u(r(o).e("content")),innerHTML:i.message},null,10,Tn)],2112)):(f(),F("p",{key:0,class:u(r(o).e("content"))},O(i.message),3))]),i.showClose?(f(),C(r(ce),{key:2,class:u(r(o).e("closeBtn")),onClick:Z(P,["stop"])},{default:b(()=>[B(r(a))]),_:1},8,["class","onClick"])):T("v-if",!0)],46,Bn),[[X,t.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Sn=ve(Mn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let kn=1;const Re=e=>{const n=!e||te(e)||ae(e)||J(e)?{message:e}:e,s={...v,...n};if(!s.appendTo)s.appendTo=document.body;else if(te(s.appendTo)){let a=document.querySelector(s.appendTo);fe(a)||(a=document.body),s.appendTo=a}return s},In=e=>{const n=E.indexOf(e);if(n===-1)return;E.splice(n,1);const{handler:s}=e;s.close()},$n=({appendTo:e,...n},s)=>{const a=`message_${kn++}`,o=n.onClose,l=document.createElement("div"),d={...n,id:a,onClose:()=>{o==null||o(),In(w)},onDestroy:()=>{oe(null,l)}},m=B(Sn,d,J(d.message)||ae(d.message)?{default:J(d.message)?d.message:()=>d.message}:null);m.appContext=s||H._context,oe(m,l),e.appendChild(l.firstElementChild);const g=m.component,w={id:a,vnode:m,vm:g,handler:{close:()=>{g.exposed.visible.value=!1}},props:m.component.props};return w},H=(e={},n)=>{if(!ye)return{close:()=>{}};if(ie(Te.max)&&E.length>=Te.max)return{close:()=>{}};const s=Re(e);if(s.grouping&&E.length){const o=E.find(({vnode:l})=>{var d;return((d=l.props)==null?void 0:d.message)===s.message});if(o)return o.props.repeatNum+=1,o.props.type=s.type,o.handler}const a=$n(s,n);return E.push(a),a.handler};ze.forEach(e=>{H[e]=(n={},s)=>{const a=Re(n);return H({...a,type:e},s)}});function An(e){for(const n of E)(!e||e===n.props.type)&&n.handler.close()}H.closeAll=An;H._context=null;const Xn=Ze(H,"$message"),Ln=Q({name:"ElMessageBox",directives:{TrapFocus:vn},components:{ElButton:Ge,ElFocusTrap:Xe,ElInput:en,ElOverlay:sn,ElIcon:ce,...Oe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:nn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:s,zIndex:a,ns:o,size:l}=Ae("message-box",y(()=>e.buttonSize)),{t:d}=s,{nextZIndex:m}=a,g=M(!1),t=Je({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:m()}),w=y(()=>{const c=t.type;return{[o.bm("icon",c)]:c&&se[c]}}),$=we(),p=we(),le=y(()=>t.icon||se[t.type]||""),W=y(()=>!!t.message),S=M(),K=M(),A=M(),R=M(),N=M(),x=y(()=>t.confirmButtonClass);ue(()=>t.inputValue,async c=>{await q(),e.boxType==="prompt"&&c!==null&&Ce()},{immediate:!0}),ue(()=>g.value,c=>{var k,V;c&&(e.boxType!=="prompt"&&(t.autofocus?A.value=(V=(k=N.value)==null?void 0:k.$el)!=null?V:S.value:A.value=S.value),t.zIndex=m()),e.boxType==="prompt"&&(c?q().then(()=>{var Ee;R.value&&R.value.$el&&(t.autofocus?A.value=(Ee=Ne())!=null?Ee:S.value:A.value=S.value)}):(t.editorErrorMessage="",t.validateError=!1))});const P=y(()=>e.draggable);tn(S,K,P),Le(async()=>{await q(),e.closeOnHashChange&&window.addEventListener("hashchange",L)}),Ye(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",L)});function L(){g.value&&(g.value=!1,q(()=>{t.action&&n("action",t.action)}))}const i=()=>{e.closeOnClickModal&&ee(t.distinguishCancelAndClose?"close":"cancel")},_=an(i),be=c=>{if(t.inputType!=="textarea")return c.preventDefault(),ee("confirm")},ee=c=>{var k;e.boxType==="prompt"&&c==="confirm"&&!Ce()||(t.action=c,t.beforeClose?(k=t.beforeClose)==null||k.call(t,c,t,L):L())},Ce=()=>{if(e.boxType==="prompt"){const c=t.inputPattern;if(c&&!c.test(t.inputValue||""))return t.editorErrorMessage=t.inputErrorMessage||d("el.messagebox.error"),t.validateError=!0,!1;const k=t.inputValidator;if(typeof k=="function"){const V=k(t.inputValue);if(V===!1)return t.editorErrorMessage=t.inputErrorMessage||d("el.messagebox.error"),t.validateError=!0,!1;if(typeof V=="string")return t.editorErrorMessage=V,t.validateError=!0,!1}}return t.editorErrorMessage="",t.validateError=!1,!0},Ne=()=>{const c=R.value.$refs;return c.input||c.textarea},he=()=>{ee("close")},Pe=()=>{e.closeOnPressEscape&&he()};return e.lockScroll&&on(g),{...Qe(t),ns:o,overlayEvent:_,visible:g,hasMessage:W,typeClass:w,contentId:$,inputId:p,btnSize:l,iconComponent:le,confirmButtonClasses:x,rootRef:S,focusStartRef:A,headerRef:K,inputRef:R,confirmRef:N,doClose:L,handleClose:he,onCloseRequested:Pe,handleWrapperClick:i,handleInputEnter:be,handleAction:ee,t:d}}}),On=["aria-label","aria-describedby"],zn=["aria-label"],Rn=["id"];function Nn(e,n,s,a,o,l){const d=D("el-icon"),m=D("close"),g=D("el-input"),t=D("el-button"),w=D("el-focus-trap"),$=D("el-overlay");return f(),C(ge,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=p=>e.$emit("vanish")),persisted:""},{default:b(()=>[G(B($,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:b(()=>[h("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...p)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...p)),onMousedown:n[9]||(n[9]=(...p)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...p)),onMouseup:n[10]||(n[10]=(...p)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...p))},[B(w,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:b(()=>[h("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:de(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=Z(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(f(),F("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[h("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(f(),C(d,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:b(()=>[(f(),C(j(e.iconComponent)))]),_:1},8,["class"])):T("v-if",!0),h("span",null,O(e.title),1)],2),e.showClose?(f(),F("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=ne(Z(p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[B(d,{class:u(e.ns.e("close"))},{default:b(()=>[B(m)]),_:1},8,["class"])],42,zn)):T("v-if",!0)],2)):T("v-if",!0),h("div",{id:e.contentId,class:u(e.ns.e("content"))},[h("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(f(),C(d,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:b(()=>[(f(),C(j(e.iconComponent)))]),_:1},8,["class"])):T("v-if",!0),e.hasMessage?(f(),F("div",{key:1,class:u(e.ns.e("message"))},[me(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(f(),C(j(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(f(),C(j(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:b(()=>[re(O(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):T("v-if",!0)],2),G(h("div",{class:u(e.ns.e("input"))},[B(g,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=p=>e.inputValue=p),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:ne(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),h("div",{class:u(e.ns.e("errormsg")),style:de({visibility:e.editorErrorMessage?"visible":"hidden"})},O(e.editorErrorMessage),7)],2),[[X,e.showInput]])],10,Rn),h("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(f(),C(t,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=p=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=ne(Z(p=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:b(()=>[re(O(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):T("v-if",!0),G(B(t,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=p=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=ne(Z(p=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:b(()=>[re(O(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[X,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,On)]),_:3},8,["z-index","overlay-class","mask"]),[[X,e.visible]])]),_:3})}var Pn=ve(Ln,[["render",Nn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Y=new Map,Vn=e=>{let n=document.body;return e.appendTo&&(te(e.appendTo)&&(n=document.querySelector(e.appendTo)),fe(e.appendTo)&&(n=e.appendTo),fe(n)||(n=document.body)),n},Dn=(e,n,s=null)=>{const a=B(Pn,e,J(e.message)||ae(e.message)?{default:J(e.message)?e.message:()=>e.message}:null);return a.appContext=s,oe(a,n),Vn(e).appendChild(n.firstElementChild),a.component},Fn=()=>document.createElement("div"),Hn=(e,n)=>{const s=Fn();e.onVanish=()=>{oe(null,s),Y.delete(o)},e.onAction=l=>{const d=Y.get(o);let m;e.showInput?m={value:o.inputValue,action:l}:m=l,e.callback?e.callback(m,a.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?d.reject("close"):d.reject("cancel"):d.resolve(m)};const a=Dn(e,s,n),o=a.proxy;for(const l in e)Me(e,l)&&!Me(o.$props,l)&&(o[l]=e[l]);return o.visible=!0,o};function U(e,n=null){if(!ye)return Promise.reject();let s;return te(e)||ae(e)?e={message:e}:s=e.callback,new Promise((a,o)=>{const l=Hn(e,n??U._context);Y.set(l,{options:e,callback:s,resolve:a,reject:o})})}const Un=["alert","confirm","prompt"],Kn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Un.forEach(e=>{U[e]=qn(e)});function qn(e){return(n,s,a,o)=>{let l="";return We(s)?(a=s,l=""):xe(s)?l="":l=s,U(Object.assign({title:l,message:n,type:"",...Kn[e]},a,{boxType:e}),o)}}U.close=()=>{Y.forEach((e,n)=>{n.doClose()}),Y.clear()};U._context=null;const I=U;I.install=e=>{I._context=e._context,e.config.globalProperties.$msgbox=I,e.config.globalProperties.$messageBox=I,e.config.globalProperties.$alert=I.alert,e.config.globalProperties.$confirm=I.confirm,e.config.globalProperties.$prompt=I.prompt};const Jn=I;export{Jn as E,Xn as a};
