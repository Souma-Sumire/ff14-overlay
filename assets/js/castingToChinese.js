import{z as de,J as L,d as M,A as me,c as i,bj as fe,bk as ce,bl as pe,a0 as ge,bm as he,bd as we,K as R,f as w,g as b,x as C,i as e,h as l,y as V,C as J,Y as Z,a8 as ve,t as x,n as O,l as h,p as ye,aD as Ce,M as Ve,u as be,a as _e,b as ke,r as G,w as Q,v as ee,k as a,j as d,m as Se,F as Ae,E as Ie,V as xe,W as De,X as $e}from"./index.js";import{E as ze}from"./el-row.js";import{E as Ee}from"./el-col.js";import{E as Te}from"./el-popconfirm.js";/* empty css          */import{E as Ue}from"./el-input.js";import{E as Fe,a as Xe}from"./el-select.js";import{E as Ye,a as Ne}from"./el-input-number.js";import{g as Pe}from"./actionChinese.js";import{p as Be}from"./queryParams.js";import{_ as Le}from"./_plugin-vue_export-helper.js";import"./scroll.js";const Oe=de({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:_=>_>=0&&_<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:L(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:L([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:L(Function),default:_=>`${_}%`}}),Me=["aria-valuenow"],We={viewBox:"0 0 100 100"},Ke=["d","stroke","stroke-width"],je=["d","stroke","opacity","stroke-linecap","stroke-width"],He={key:0},qe=M({name:"ElProgress"}),Re=M({...qe,props:Oe,setup(_){const r=_,f={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},u=me("progress"),t=i(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:I(r.percentage)})),D=i(()=>(r.strokeWidth/r.width*100).toFixed(1)),E=i(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(D.value)/2}`,10):0),T=i(()=>{const o=E.value,p=r.type==="dashboard";return`
          M 50 50
          m 0 ${p?"":"-"}${o}
          a ${o} ${o} 0 1 1 0 ${p?"-":""}${o*2}
          a ${o} ${o} 0 1 1 0 ${p?"":"-"}${o*2}
          `}),k=i(()=>2*Math.PI*E.value),$=i(()=>r.type==="dashboard"?.75:1),U=i(()=>`${-1*k.value*(1-$.value)/2}px`),X=i(()=>({strokeDasharray:`${k.value*$.value}px, ${k.value}px`,strokeDashoffset:U.value})),Y=i(()=>({strokeDasharray:`${k.value*$.value*(r.percentage/100)}px, ${k.value}px`,strokeDashoffset:U.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),N=i(()=>{let o;return r.color?o=I(r.percentage):o=f[r.status]||f.default,o}),P=i(()=>r.status==="warning"?fe:r.type==="line"?r.status==="success"?ce:pe:r.status==="success"?ge:he),B=i(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),S=i(()=>r.format(r.percentage));function A(o){const p=100/o.length;return o.map((c,y)=>R(c)?{color:c,percentage:(y+1)*p}:c).sort((c,y)=>c.percentage-y.percentage)}const I=o=>{var p;const{color:v}=r;if(we(v))return v(o);if(R(v))return v;{const c=A(v);for(const y of c)if(y.percentage>o)return y.color;return(p=c[c.length-1])==null?void 0:p.color}};return(o,p)=>(w(),b("div",{class:C([e(u).b(),e(u).m(o.type),e(u).is(o.status),{[e(u).m("without-text")]:!o.showText,[e(u).m("text-inside")]:o.textInside}]),role:"progressbar","aria-valuenow":o.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[o.type==="line"?(w(),b("div",{key:0,class:C(e(u).b("bar"))},[l("div",{class:C(e(u).be("bar","outer")),style:V({height:`${o.strokeWidth}px`})},[l("div",{class:C([e(u).be("bar","inner"),{[e(u).bem("bar","inner","indeterminate")]:o.indeterminate},{[e(u).bem("bar","inner","striped")]:o.striped},{[e(u).bem("bar","inner","striped-flow")]:o.stripedFlow}]),style:V(e(t))},[(o.showText||o.$slots.default)&&o.textInside?(w(),b("div",{key:0,class:C(e(u).be("bar","innerText"))},[J(o.$slots,"default",{percentage:o.percentage},()=>[l("span",null,x(e(S)),1)])],2)):Z("v-if",!0)],6)],6)],2)):(w(),b("div",{key:1,class:C(e(u).b("circle")),style:V({height:`${o.width}px`,width:`${o.width}px`})},[(w(),b("svg",We,[l("path",{class:C(e(u).be("circle","track")),d:e(T),stroke:`var(${e(u).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":e(D),fill:"none",style:V(e(X))},null,14,Ke),l("path",{class:C(e(u).be("circle","path")),d:e(T),stroke:e(N),fill:"none",opacity:o.percentage?1:0,"stroke-linecap":o.strokeLinecap,"stroke-width":e(D),style:V(e(Y))},null,14,je)]))],6)),(o.showText||o.$slots.default)&&!o.textInside?(w(),b("div",{key:2,class:C(e(u).e("text")),style:V({fontSize:`${e(B)}px`})},[J(o.$slots,"default",{percentage:o.percentage},()=>[o.status?(w(),O(e(Ce),{key:1},{default:h(()=>[(w(),O(ye(e(P))))]),_:1})):(w(),b("span",He,x(e(S)),1))])],6)):Z("v-if",!0)],10,Me))}});var Je=ve(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ze=Ve(Je);const Ge={style:{width:"10rem"}},Qe={class:"noCSS"},et={class:"noCSS"},tt={class:"actionID"},ot=M({__name:"castingToChinese",setup(_){var v,c,y;be(m=>({"2648fc46":e(E),d0ad069e:e(U),d0ad069c:e(X),"6e887101":e(T),dc3140fa:e(k),bfabce6a:e(Y),bfabce68:e(N),"477c80a5":e($),"12b126fd":e(P),"12b126fe":e(B),"04c721df":e(D)}));class r{constructor(s){this.name=Pe(parseInt(s[4],16))??s[4],this.startTime=Date.now(),this.castTime=Number(s[8])*1e3,this.overTime=this.startTime+this.castTime,this.actionId=parseInt(s[4],16)}}const f=_e({targetCast:void 0}),u=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],t=ke("castingToChinese",{width:283,showCountdown:!0,showProgress:!0,showActionChinese:!0,showActionID:!1,offsetCountdownX:2,offsetCountdownY:2,offsetActionChineseX:0,offsetActionChineseY:-2,offsetActionIDX:0,offsetActionIDY:35,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"},localStorage,{mergeDefaults:!0}),D=i(()=>t.value.width+"px"),E=i(()=>t.value.showCountdown?1:0),T=i(()=>t.value.showProgress?1:0),k=i(()=>t.value.showActionChinese?1:0),$=i(()=>t.value.showActionID?1:0),U=i(()=>t.value.offsetCountdownX+"px"),X=i(()=>t.value.offsetCountdownY+"px"),Y=i(()=>t.value.offsetActionChineseX+"px"),N=i(()=>t.value.offsetActionChineseY+"px"),P=i(()=>t.value.offsetActionIDX+"px"),B=i(()=>t.value.offsetActionIDY+"px"),S=new Map,A=G(0),I=t.value.ping,o=G(/^(?:1|true|on)$/i.test((v=Be)==null?void 0:v.showSettings)||((y=(c=document.getElementById("unlocked"))==null?void 0:c.style)==null?void 0:y.display)==="flex");addOverlayListener("EnmityTargetData",m=>{var s;f.targetCast=S.get((s=m[t.value.targetKey])==null?void 0:s.ID)}),addOverlayListener("LogLine",m=>{m.line[0]==="20"?S.set(parseInt(m.line[2],16),new r(m.line)):m.line[0]==="23"&&S.delete(parseInt(m.line[2],16))}),addOverlayListener("ChangeZone",()=>S.clear()),startOverlayEvents(),requestAnimationFrame(function m(){A.value=Date.now(),requestAnimationFrame(m)}),document.addEventListener("onOverlayStateUpdate",m=>{var s;o.value=((s=m==null?void 0:m.detail)==null?void 0:s.isLocked)===!1});function p(){localStorage.removeItem("castingToChinese"),location.reload()}return(m,s)=>{const g=Ye,F=Ne,te=Ue,oe=Xe,se=Fe,ne=Ie,ae=Te,le=xe,W=Ee,K=ze,re=Ze,ie=De,ue=$e;return w(),O(ue,null,{default:h(()=>[Q(a(le,{class:"settings"},{default:h(()=>[l("form",null,[d("宽度: "),a(g,{modelValue:e(t).width,"onUpdate:modelValue":s[0]||(s[0]=n=>e(t).width=n),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("显示倒计时: "),a(F,{modelValue:e(t).showCountdown,"onUpdate:modelValue":s[1]||(s[1]=n=>e(t).showCountdown=n)},null,8,["modelValue"])]),l("form",null,[d("显示进度条: "),a(F,{modelValue:e(t).showProgress,"onUpdate:modelValue":s[2]||(s[2]=n=>e(t).showProgress=n)},null,8,["modelValue"])]),l("form",null,[d("显示中文: "),a(F,{modelValue:e(t).showActionChinese,"onUpdate:modelValue":s[3]||(s[3]=n=>e(t).showActionChinese=n)},null,8,["modelValue"])]),l("form",null,[d("显示ID: "),a(F,{modelValue:e(t).showActionID,"onUpdate:modelValue":s[4]||(s[4]=n=>e(t).showActionID=n)},null,8,["modelValue"])]),l("form",null,[d("延迟(ms): "),a(g,{modelValue:e(t).ping,"onUpdate:modelValue":s[5]||(s[5]=n=>e(t).ping=n),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("保留(ms): "),a(g,{modelValue:e(t).keep,"onUpdate:modelValue":s[6]||(s[6]=n=>e(t).keep=n),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("倒计时偏移X: "),a(g,{modelValue:e(t).offsetCountdownX,"onUpdate:modelValue":s[7]||(s[7]=n=>e(t).offsetCountdownX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),l("form",null,[d("倒计时偏移Y: "),a(g,{modelValue:e(t).offsetCountdownY,"onUpdate:modelValue":s[8]||(s[8]=n=>e(t).offsetCountdownY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("中文偏移X: "),a(g,{modelValue:e(t).offsetActionChineseX,"onUpdate:modelValue":s[9]||(s[9]=n=>e(t).offsetActionChineseX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),l("form",null,[d("中文偏移Y: "),a(g,{modelValue:e(t).offsetActionChineseY,"onUpdate:modelValue":s[10]||(s[10]=n=>e(t).offsetActionChineseY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("ID偏移X: "),a(g,{modelValue:e(t).offsetActionIDX,"onUpdate:modelValue":s[11]||(s[11]=n=>e(t).offsetActionIDX=n),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),l("form",null,[d("ID偏移Y: "),a(g,{modelValue:e(t).offsetActionIDY,"onUpdate:modelValue":s[12]||(s[12]=n=>e(t).offsetActionIDY=n),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("倒计时字号(px): "),a(g,{modelValue:e(t).fontSizeCountDown,"onUpdate:modelValue":s[13]||(s[13]=n=>e(t).fontSizeCountDown=n),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",null,[d("中文字号(px): "),a(g,{modelValue:e(t).fontSizeActionName,"onUpdate:modelValue":s[14]||(s[14]=n=>e(t).fontSizeActionName=n),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),l("form",Ge,[d("字体: "),a(te,{modelValue:e(t).fontFamily,"onUpdate:modelValue":s[15]||(s[15]=n=>e(t).fontFamily=n),size:"small",clearable:"",onClear:s[16]||(s[16]=n=>e(t).fontFamily="SmartisanHei")},null,8,["modelValue"])]),l("form",Qe,[a(se,{modelValue:e(t).targetKey,"onUpdate:modelValue":s[17]||(s[17]=n=>e(t).targetKey=n),placeholder:"Select",size:"small",teleported:!1},{default:h(()=>[(w(),b(Ae,null,Se(u,n=>a(oe,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),l("form",et,[a(ae,{onConfirm:p,teleported:!1,title:"确定要重置？"},{reference:h(()=>[a(ne,null,{default:h(()=>[d("重置全部用户设置")]),_:1})]),_:1})])]),_:1},512),[[ee,e(o)]]),Q(a(ie,{style:V({fontFamily:e(t).fontFamily})},{default:h(()=>{var n,j;return[a(K,null,{default:h(()=>[a(W,{span:24,flex:"","justify-end":""},{default:h(()=>{var z;return[l("div",{style:V({fontSize:e(t).fontSizeCountDown+"px"}),class:"countdown"},x(Math.max(((((z=e(f).targetCast)==null?void 0:z.overTime)??1)-e(A)-e(I))/1e3,0).toFixed(2)),5)]}),_:1})]),_:1}),a(re,{percentage:Math.min((e(A)-(((n=e(f).targetCast)==null?void 0:n.startTime)??1)+e(I))/(((j=e(f).targetCast)==null?void 0:j.castTime)??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),a(K,null,{default:h(()=>[a(W,{span:24,class:"action"},{default:h(()=>{var z,H,q;return[l("div",tt,x((z=e(f).targetCast)==null?void 0:z.actionId)+"("+x((H=e(f).targetCast)==null?void 0:H.actionId.toString(16).toUpperCase())+")",1),l("div",{style:V({fontSize:e(t).fontSizeActionName+"px"}),class:"actionChinese"},x((q=e(f).targetCast)==null?void 0:q.name),5)]}),_:1})]),_:1})]}),_:1},8,["style"]),[[ee,e(f).targetCast&&e(A)-e(f).targetCast.overTime+e(I)<e(t).keep]])]),_:1})}}});const gt=Le(ot,[["__scopeId","data-v-9ece0ded"]]);export{gt as default};
