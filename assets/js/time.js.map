{"version":3,"file":"time.js","sources":["../../../src/pages/time.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport moment from \"moment\";\n// const time = ref(\"\");\nconst gameIsActive = ref(false);\nconst gameActiveTime = ref(0);\nconst gameCombatTime = ref(\"\");\nconst lastLogTime = ref(\"\");\n\nrequestAnimationFrame(function update() {\n  // time.value = moment().format(\"YYYY/MM/DD HH:mm:ss.SSS\");\n  if (gameActiveTime.value > 0) {\n    const currentTime = Date.now();\n    const milliseconds = currentTime - gameActiveTime.value;\n    const duration = moment.duration(milliseconds);\n    const minutes = duration.minutes();\n    const seconds = duration.seconds();\n    gameCombatTime.value = `${minutes < 10 ? \"0\" : \"\"}${minutes}:${seconds < 10 ? \"0\" : \"\"}${seconds}`;\n  }\n  requestAnimationFrame(update);\n});\n\nconst handleCombatData = (e: any) => {\n  if (e.isActive === \"true\" && gameIsActive.value === false) {\n    gameActiveTime.value = Date.now();\n  } else if (e.isActive === \"false\") {\n    gameActiveTime.value = 0;\n    gameCombatTime.value = \"\";\n  }\n  gameIsActive.value = e.isActive === \"true\";\n};\n\nconst handleLogLine = (e: any) => {\n  if (e.line[0] === \"00\") return;\n  lastLogTime.value = e.line[1].match(/(?<=T)\\d\\d:\\d\\d\\:\\d\\d\\.\\d\\d\\d/)[0];\n};\n\naddOverlayListener(\"CombatData\", handleCombatData);\naddOverlayListener(\"LogLine\", handleLogLine);\nstartOverlayEvents();\n</script>\n\n<template>\n  <!-- <span class=\"time realTime\">\n    {{ time }}\n  </span> -->\n  <span v-if=\"gameCombatTime\" class=\"time gameTime\">\n    {{ gameCombatTime }}\n  </span>\n  <span v-if=\"gameCombatTime\" class=\"time logTime\">\n    {{ lastLogTime }}\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n.time {\n  background-color: rgba(0, 0, 0, 0.4);\n  color: white;\n  font-size: 24px;\n  font-weight: bold;\n  padding: 2px 5px;\n}\n\n.realTime {\n  padding: 2px 5px;\n}\n\n.gameTime {\n  margin-left: 5px;\n}\n</style>\n"],"names":["gameIsActive","ref","gameActiveTime","gameCombatTime","lastLogTime","update","milliseconds","duration","moment","minutes","seconds","handleCombatData","handleLogLine"],"mappings":"+PAGA,MAAAA,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,CAAA,EACAE,EAAAF,EAAA,EAAA,EACAG,EAAAH,EAAA,EAAA,EAEA,sBAAA,SAAAI,GAAA,CAEE,GAAAH,EAAA,MAAA,EAAA,CAEE,MAAAI,EADA,KAAA,MACAJ,EAAA,MACAK,EAAAC,EAAA,SAAAF,CAAA,EACAG,EAAAF,EAAA,UACAG,EAAAH,EAAA,UACAJ,EAAA,MAAA,GAAAM,EAAA,GAAA,IAAA,KAAAA,KAAAC,EAAA,GAAA,IAAA,KAAAA,IAEF,sBAAAL,CAAA,CAA4B,CAAA,EAG9B,MAAAM,EAAA,GAAA,CACE,EAAA,WAAA,QAAAX,EAAA,QAAA,GACEE,EAAA,MAAA,KAAA,MAAgC,EAAA,WAAA,UAEhCA,EAAA,MAAA,EACAC,EAAA,MAAA,IAEFH,EAAA,MAAA,EAAA,WAAA,MAAoC,EAGtCY,EAAA,GAAA,CACE,EAAA,KAAA,CAAA,IAAA,OACAR,EAAA,MAAA,EAAA,KAAA,CAAA,EAAA,MAAA,WAAA,0CAAA,GAAA,CAAA,EAAsE,EAGxE,0BAAA,aAAAO,CAAA,EACA,mBAAA,UAAAC,CAAA,EACA"}