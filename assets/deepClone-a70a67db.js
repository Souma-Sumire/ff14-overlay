import{d as _,A as g,F as w,aw as y,o as k,b as $,g as d,p as x,l as E}from"./vendor-11731512.js";import{_ as I}from"./index-83851854.js";const L=e=>(x("data-v-8006715c"),e=e(),E(),e),D={class:"upload select"},A=L(()=>d("div",{class:"upload text"},[d("span",null,"+"),d("p",null,"上传或拖入ACT日志")],-1)),F=_({__name:"testLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:n}){const t=n,r=g(null),a=g(null),i=async c=>{var o,f;(o=a.value)==null||o.classList.remove("drag");const s=c.target.files;if(!(!s||s.length===0)){t("beforeHandle");for(let l=0;l<s.length;l++){const h=await s[l].text();for(const v of h.split(`
`))t("handleLine",v)}t("afterHandle"),(f=a.value)==null||f.classList.remove("drag")}},u=c=>{var s;c.preventDefault(),(s=a.value)==null||s.classList.add("drag")},p=c=>{var s;c.preventDefault(),(s=a.value)==null||s.classList.remove("drag")};return w(()=>{var c,s,o;(c=r.value)==null||c.addEventListener("change",i),(s=a.value)==null||s.addEventListener("dragover",u),(o=a.value)==null||o.addEventListener("dragleave",p)}),y(()=>{var c,s,o;(c=r.value)==null||c.removeEventListener("change",i),(s=a.value)==null||s.removeEventListener("dragover",u),(o=a.value)==null||o.removeEventListener("dragleave",p)}),(c,s)=>(k(),$("div",D,[d("div",{class:"upload-select",ref_key:"select",ref:a},[A,d("input",{type:"file",ref_key:"input",ref:r},null,512)],512)]))}});const q=I(F,[["__scopeId","data-v-8006715c"]]);function z(e){switch(e){case"dodge":return"闪避";case"damage done":return"击中";case"blocked damage":return"格挡";case"parried damage":return"招架";case"instant death":return"即死";case"heal":return"治疗";case"crit heal":return"暴击治疗";case"damage":return"普通";case"crit damage":return"暴击";case"direct hit damage":return"直击";case"crit direct hit damage":return"直暴";case"physics":return"物理";case"magic":return"魔法";case"darkness":return"暗黑";default:throw new Error("Unknown type")}}function G(e){const n=C(e),t=H(e),r=S(e);return{effect:n,properties:t,type:r}}function C(e){switch(!0){case/1$/.test(e):return"dodge";case/3$/.test(e):return"damage done";case/5$/.test(e):return"blocked damage";case/6$/.test(e):return"parried damage";case/33$/.test(e):return"instant death";case/4$/.test(e):return"heal";case/2\w{4}4$/.test(e):return"crit heal";default:throw new Error(`Unknown effect flag ${e}`)}}function H(e){switch(!0){case/2\w{3}$/.test(e):return"crit damage";case/4\w{3}$/.test(e):return"direct hit damage";case/6\w{3}$/.test(e):return"crit direct hit damage";default:return"damage"}}function S(e){switch(!0){case/7?[1234]\w{3}[35]$|[16]$/.test(e):return"physics";case/^E$/.test(e):case/5\w{4}$/.test(e):return"magic";case/^(?:\d0)?3$/.test(e):case/6\w{4}$/.test(e):return"darkness";default:return console.error(`Unknown type flag ${e}`),"physics"}}const U=["3E","113","213","313"],B=["A10","E"],N=["04"],O="36",T=["01","03","05","06",O],J=e=>{let t=0,r=e[8]??"",a=e[8+1]??"";U.includes(r)&&(t+=2,r=e[8+t]??r,a=e[8+t+1]??a),B.includes(r)&&(t+=2,r=e[8+t]??r,a=e[8+t+1]??a);const i=V(a),u=`00${r}`.slice(-2);return{amount:i,lowByte:u,flags:r,isHeal:N.includes(u),isAttack:T.includes(u)}},V=e=>{if(e===void 0)return 0;const n=e.length;if(n<=4)return 0;let t=Number.parseInt(e.slice(0,n-4),16);if(e[n-4]==="4"){const r=Number.parseInt(e.slice(n-2,n),16);t=t-r+(r<<16)}return t},m=(()=>typeof structuredClone=="function"?structuredClone:e=>{if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(Array.isArray(e))return e.map(t=>m(t));const n=new e.constructor;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=m(e[t]));return n})();export{q as a,G as b,m as d,J as p,z as t};
