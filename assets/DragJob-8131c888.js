import{d as U,n as m,q as C,r as T,o as c,e as i,a as _,w as g,x as A,F as j,L as v,u,s as I,P as O,y as z,v as B,aS as E}from"./vendor-20fa4bb6.js";import{U as a}from"./util-831b56e7.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const N={flex:"~ col",style:{position:"relative"}},M=U({__name:"DragJob",props:{party:{}},emits:["updateSortArr"],setup(h,{emit:x}){const f=h,y=x,k=m(),J=m(!0),d=m(!1),p=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];function w(e){return f.party.find(r=>r.job===e)}const V=a.getBattleJobs3(),n=(()=>{const e={},r={tank:a.isTankJob,healer:a.isHealerJob,dps:a.isDpsJob,crafter:a.isCraftingJob,gatherer:a.isGatheringJob};for(const t of p.map(o=>o.role))e[t]=(t==="none"?[]:V.filter(o=>r[t](o))).map(o=>a.jobToJobEnum(o)).sort((o,b)=>a.enumSortMethod(o,b));return e})(),S=Object.values(n).flat().map(e=>({name:a.nameToFullName(a.jobEnumToJob(e)).simple1,job:e})),s=C("cactbotRuntime-job-list",(()=>{const e={};for(const r of p.map(t=>t.role))e[r]=S.filter(t=>n[r].includes(t.job)).sort((t,o)=>n[r].indexOf(t.job)-n[r].indexOf(o.job));return e})());s.value.dps.findIndex(e=>e.job===41)===-1&&s.value.dps.push({name:"蛇",job:41}),s.value.dps.findIndex(e=>e.job===42)===-1&&s.value.dps.push({name:"绘",job:42});function D(){y("updateSortArr",Object.values(s.value).flat().map(e=>e.job))}return(e,r)=>{const t=T("vxe-checkbox");return c(),i("div",N,[_(t,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=o=>d.value=o),size:"mini",style:{"--vxe-primary-color":"none",position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white","border-radius":"0.25rem",padding:"0.08rem 0.16rem","font-size":"0.75rem","line-height":"1","box-shadow":"0 0 2px black"}},{default:g(()=>[A(" 解除限制 ")]),_:1},8,["modelValue"]),(c(),i(j,null,v(p,(o,b)=>_(u(E),{key:b,ref_for:!0,ref_key:"el",ref:k,modelValue:u(s)[o.role],"onUpdate:modelValue":l=>u(s)[o.role]=l,disabled:!J.value,animation:"150","ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:D},{default:g(()=>[(c(!0),i(j,null,v(u(s)[o.role],l=>I((c(),i("div",{key:l.job,class:O(`${d.value||w(l.job)?`draggable bg-${o.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75"} rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white`)},z(l.name),3)),[[B,f.party.find(L=>L.job===36)?!0:l.job!==36]])),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])),64))])}}});const H=F(M,[["__scopeId","data-v-5ccafce0"]]);export{H as _};
