import{d as v,v as g,B as _,au as w,o as y,b as k,f as d,p as x,j as E}from"./vendor-083a227c.js";import{_ as $}from"./index-de3f1310.js";const I=e=>(x("data-v-d140243c"),e=e(),E(),e),L={class:"upload select"},D=I(()=>d("div",{class:"upload text"},[d("span",null,"+"),d("p",null,"上传或拖入ACT日志")],-1)),F=v({__name:"testLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:n}){const t=n,s=g(null),a=g(null),i=async c=>{var o,p;(o=a.value)==null||o.classList.remove("drag");const r=c.target.files;if(!(!r||r.length==0)){t("beforeHandle");for(let l=0;l<r.length;l++)(await r[l].text()).split(`
`).forEach(h=>{t("handleLine",h)});t("afterHandle"),(p=a.value)==null||p.classList.remove("drag")}},u=c=>{var r;c.preventDefault(),(r=a.value)==null||r.classList.add("drag")},f=c=>{var r;c.preventDefault(),(r=a.value)==null||r.classList.remove("drag")};return _(()=>{var c,r,o;(c=s.value)==null||c.addEventListener("change",i),(r=a.value)==null||r.addEventListener("dragover",u),(o=a.value)==null||o.addEventListener("dragleave",f)}),w(()=>{var c,r,o;(c=s.value)==null||c.removeEventListener("change",i),(r=a.value)==null||r.removeEventListener("dragover",u),(o=a.value)==null||o.removeEventListener("dragleave",f)}),(c,r)=>(y(),k("div",L,[d("div",{class:"upload-select",ref_key:"select",ref:a},[D,d("input",{type:"file",ref_key:"input",ref:s},null,512)],512)]))}});const q=$(F,[["__scopeId","data-v-d140243c"]]);function z(e){switch(e){case"dodge":return"闪避";case"damage done":return"击中";case"blocked damage":return"格挡";case"parried damage":return"招架";case"instant death":return"即死";case"heal":return"治疗";case"crit heal":return"暴击治疗";case"damage":return"普通";case"crit damage":return"暴击";case"direct hit damage":return"直击";case"crit direct hit damage":return"直暴";case"physics":return"物理";case"magic":return"魔法";case"darkness":return"暗黑";default:throw new Error("Unknown type")}}function G(e){const n=A(e),t=C(e),s=H(e);return{effect:n,properties:t,type:s}}function A(e){switch(!0){case/1$/.test(e):return"dodge";case/3$/.test(e):return"damage done";case/5$/.test(e):return"blocked damage";case/6$/.test(e):return"parried damage";case/33$/.test(e):return"instant death";case/4$/.test(e):return"heal";case/2\w{4}4$/.test(e):return"crit heal";default:throw new Error("Unknown effect flag "+e)}}function C(e){switch(!0){case/2\w{3}$/.test(e):return"crit damage";case/4\w{3}$/.test(e):return"direct hit damage";case/6\w{3}$/.test(e):return"crit direct hit damage";default:return"damage"}}function H(e){switch(!0){case/7?[1234]\w{3}[35]$|[16]$/.test(e):return"physics";case/^E$/.test(e):case/5\w{4}$/.test(e):return"magic";case/^(?:\d0)?3$/.test(e):case/6\w{4}$/.test(e):return"darkness";default:return console.error("Unknown type flag "+e),"physics"}}const B=["3E","113","213","313"],S=["A10","E"],U=["04"],T="36",V=["01","03","05","06",T],J=e=>{let t=0,s=e[8]??"",a=e[8+1]??"";B.includes(s)&&(t+=2,s=e[8+t]??s,a=e[8+t+1]??a),S.includes(s)&&(t+=2,s=e[8+t]??s,a=e[8+t+1]??a);const i=O(a),u=`00${s}`.slice(-2);return{amount:i,lowByte:u,flags:s,isHeal:U.includes(u),isAttack:V.includes(u)}},O=e=>{if(e===void 0)return 0;const n=e.length;if(n<=4)return 0;let t=parseInt(e.slice(0,n-4),16);if(e[n-4]==="4"){const s=parseInt(e.slice(n-2,n),16);t=t-s+(s<<16)}return t},m=(()=>typeof structuredClone=="function"?structuredClone:e=>{if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Array)return e.map(t=>m(t));const n=new e.constructor;for(const t in e)e.hasOwnProperty(t)&&(n[t]=m(e[t]));return n})();export{q as a,G as b,m as d,J as p,z as t};
