import{d as ge,v as N,x as we,o as F,b as B,a as i,w as s,u as t,a1 as re,G as w,t as O,f as p,D as Y,F as G,H as D,I as M,ag as f,ah as se,L as be,ai as Ne,M as Be,N as he,aj as De,ae as ve,af as Fe,ad as Te,a2 as xe,ak as Oe,c as k,ac as Ce,$ as fe,al as Ue,A as ye,Z as Re,g as H,W as Pe,am as _e,h as je,an as ze,a5 as qe,ao as Je,ap as Me,i as Le,e as We,p as Ke,j as Qe,K as Ze,aq as He}from"./vendor-834361d8.js";import{u as Ye,p as Ge,_ as Xe}from"./timelineShow-98b0f834.js";import{U}from"./util-f6d3a594.js";import{g as et}from"./actionChinese-71b7e526.js";import{_ as Ie}from"./index-0bc0ed8a.js";import{Z as ae}from"./zoneInfo-52d9e9b8.js";import"./xivapi-7d63ceb7.js";import"./queryParams-77a1fad5.js";const r=new Map;r.set(26155,{type:"cast",window:[999,999]});r.set(28027,{type:"cast",window:[999,999]});r.set(26340,{type:"cast",window:[999,999]});r.set(25533,{type:"begincast",window:[60,60]});r.set(26376,{type:"cast",window:[999,999]});r.set(26814,{type:"begincast",window:[999,999]});r.set(25313,{type:"begincast",window:[200,200]});r.set(27526,{type:"begincast",window:[999,999]});r.set(26215,{type:"cast",window:[500,30]});r.set(29050,{type:"begincast",window:[200,30]});r.set(29156,{type:"cast",window:[20,20]});r.set(27973,{type:"cast",window:[20,20]});r.set(27937,{type:"begincast",window:[20,20]});r.set(28059,{type:"begincast",window:[20,20]});r.set(28060,{type:"begincast",window:[20,20]});r.set(28061,{type:"begincast",window:[20,20]});r.set(27956,{type:"begincast",window:[20,20]});r.set(27957,{type:"begincast",window:[20,20]});r.set(27952,{type:"begincast",window:[30,30]});r.set(27969,{type:"begincast",window:[20,20]});r.set(27971,{type:"begincast",window:[20,20]});r.set(27939,{type:"begincast",window:[20,20]});r.set(27966,{type:"begincast",window:[20,20]});r.set(25316,{type:"begincast",window:[999,999]});r.set(25544,{type:"begincast",window:[10,10]});r.set(26379,{type:"begincast",window:[10,10]});r.set(31552,{type:"begincast",window:[30,30]});r.set(31573,{type:"begincast",window:[30,30]});r.set(31573,{type:"begincast",window:[30,30]});r.set(31617,{type:"begincast",window:[8,8]});r.set(31624,{type:"begincast",window:[30,30]});r.set(31649,{type:"begincast",window:[30,30]});r.set(18516,{type:"cast",window:[250,60]});r.set(18522,{type:"begincast",window:[500,500]});r.set(18552,{type:"begincast",window:[500,500]});r.set(19083,{type:"cast",window:[500,0]});function tt(S){const h=new Map;S.filter(o=>o.type==="begincast").map(o=>h.set(o.actionId,(h.get(o.actionId)??0)+1));for(const o of S){h.get(o.actionId)===1&&o.type==="begincast"&&(o.window=[12,12]);const b=r.get(o.actionId);(b==null?void 0:b.type)===o.type&&(o.window=b==null?void 0:b.window)}return S}const it={class:"fflogs-query-result-friendlies"},nt=["src","onerror"],lt=ge({__name:"fflogsImport",props:{settings:{},filters:{}},emits:["newTimeline","showFFlogsToggle","clearCurrentlyTimeline"],setup(S,{emit:h}){const o=S,b=h,L=new RegExp("(?<=^|\\/)(?<code>[\\d\\w]{16,})\\/?#fight=(?<fight>\\d+|last)"),R={begincast:"14",cast:"1[56]"};let T=N("查询"),E=N("");const m=N(!1),e=we({code:"",fightIndex:0,start:0,end:0,friendlies:[],abilityFilterEvents:[],abilityFilterCandidate:[],abilityFilterSelected:[],abilityFilterEventsAfterFilterRawTimeline:"",player:{},zoneID:0,bossIDs:[]});z();function P(d){f.fire({text:"正在解析数据 (步骤1/3)",showConfirmButton:!1}),z(),T.value="正在请求";let c=d.match(L);o.settings.api?c?c?(e.code=c.groups.code,se.get(`https://cn.fflogs.com/v1/report/fights/${e.code}?api_key=${o.settings.api}`).then(y=>{e.bossIDs=y.data.enemies.filter(C=>C.type==="Boss").map(C=>C.id),e.fightIndex=(c.groups.fight==="last"?y.data.fights.length:parseInt(c.groups.fight))-1;const g=y.data.fights[e.fightIndex];e.zoneID=g.zoneID,e.start=g.start_time,e.end=g.end_time,e.friendlies=y.data.friendlies.filter(C=>C.icon!=="LimitBreak"&&C.fights.find(v=>v.id===e.fightIndex+1)),T.value="查询",e.abilityFilterEvents.length=0,e.abilityFilterCandidate.length=0,f.fire("在列表中选择一名玩家")}).catch(y=>{f.fire({icon:"error",title:"Oops...(步骤1)",text:y}),T.value="查询"})):(f.fire({icon:"error",title:"url链接格式错误",footer:`验证规则：${L.toString().replaceAll(/\?\<\w+\>/g,"")}`}),T.value="查询"):(f.fire({icon:"error",title:"FF logs 战斗记录链接 未填写",footer:"例如：aaAAAAaAAAaAaa11#fight=18"}),T.value="查询"):(f.fire({icon:"error",title:"FF logs API Key 未填写",footer:'<a href="https://cn.fflogs.com/profile">点击这里，在最下方起名，然后获得你的V1 Client Key</a>'}),T.value="查询")}async function j(d){e.player=d,await X().then(()=>{e.abilityFilterCandidate=e.abilityFilterEvents.reduce((c,y)=>(y.sourceIsFriendly&&!c.find(g=>g.actionId===y.actionId)&&c.push(y),c),[])}).catch(c=>{f.fire({icon:"error",title:"Oops...(步骤2)",text:c})})}async function X(){f.fire({text:"正在解析数据，请耐心等待。(步骤2/3)",showConfirmButton:!1});let d=[];e.abilityFilterEvents.length=0;async function c(v){await se.get(`https://cn.fflogs.com/v1/report/events/casts/${e.code}?start=${v}&end=${e.end}&hostility=0&sourceid=${e.player.id}&api_key=${o.settings.api}`).then(async u=>{d.push(...u.data.events),u.data.nextPageTimestamp&&u.data.nextPageTimestamp>0&&u.data.nextPageTimestamp<e.end&&await c(u.data.nextPageTimestamp)}).catch(u=>{f.fire({icon:"error",title:"Oops...(步骤3.1)",text:u})})}async function y(v,u){u>=0&&await se.get(`https://cn.fflogs.com/v1/report/events/casts/${e.code}?start=${v}&end=${e.end}&hostility=1&sourceid=${e.bossIDs[u]}&api_key=${o.settings.api}`).then(async x=>{d.push(...x.data.events),x.data.nextPageTimestamp&&x.data.nextPageTimestamp>0&&x.data.nextPageTimestamp<e.end&&await y(x.data.nextPageTimestamp,u),u<e.bossIDs.length-1&&await y(v,u+1)}).catch(x=>{f.fire({icon:"error",title:"Oops...(步骤3.2)",text:x})})}let g=await c(e.start),C=await y(e.start,0);await Promise.all([g,C]).then(()=>{var v;for(const u of d)u.type==="begincast"&&u.sourceIsFriendly||e.abilityFilterEvents.push({time:Number(((u.timestamp-e.start)/1e3).toFixed(1)),type:u.type,actionName:et(u.ability.guid)??u.ability.name,actionId:u.ability.guid,sourceIsFriendly:u.sourceIsFriendly,url:((v=u==null?void 0:u.ability)==null?void 0:v.abilityIcon.replace("-","/").replace(".png",""))??"000000/000405",window:void 0});e.player.icon&&o.filters[e.player.icon]&&(e.abilityFilterSelected=o.filters[e.player.icon]),f.fire("请在技能过滤器中选择需要的技能")})}function ee(){f.fire({text:"正在解析数据 (步骤3/3)",showConfirmButton:!1}),e.player.icon&&(o.filters[e.player.icon]=JSON.parse(JSON.stringify(e.abilityFilterSelected))),e.abilityFilterEvents=e.abilityFilterEvents.filter(d=>d.sourceIsFriendly&&e.abilityFilterSelected.includes(d.actionId)||!d.sourceIsFriendly).sort((d,c)=>d.time-c.time),e.abilityFilterEvents=tt(e.abilityFilterEvents),e.abilityFilterEventsAfterFilterRawTimeline=e.abilityFilterEvents.map(d=>d.sourceIsFriendly?`${d.time} "<${d.actionName}>~"${m.value?` tts "${d.actionName}"`:""}`:/^(?:攻击|attack|攻撃)$|^unknown/i.test(d.actionName)||d.type==="cast"&&d.window===void 0?`# ${d.time} "${d.actionName}"`:`${d.time} "${d.actionName}" sync /^.{14} \\w+ ${R[d.type]}:4.{7}:[^:]+:${d.actionId.toString(16).toUpperCase()}:/${d.window?` window ${d.window.join(",")}`:""}`).join(`
`),b("newTimeline",`导入${e.player.name}`,{zoneId:e.zoneID.toString(),job:e.player.icon??"NONE"},e.abilityFilterEventsAfterFilterRawTimeline,`${e.code}#fight=${e.fightIndex+1}`),z(),b("showFFlogsToggle"),f.fire({position:"top-end",icon:"success",title:"已生成新时间轴",showConfirmButton:!1,timer:1500})}function z(){e.code="",e.fightIndex=0,e.start=0,e.end=0,e.friendlies=[],e.abilityFilterEvents=[],e.abilityFilterCandidate=[],e.abilityFilterSelected=[],e.abilityFilterEventsAfterFilterRawTimeline="",e.player={},e.zoneID=0,e.bossIDs=[]}return(d,c)=>{const y=be,g=Ne,C=Be,v=he,u=De,x=ve,te=Fe,q=Te,ie=Ce,ne=xe,W=Oe;return F(),B(D,null,[i(u,{inline:!0,class:"fflogs-query"},{default:s(()=>[i(g,{label:"FF logs 战斗",style:{width:"450px"}},{default:s(()=>[i(y,{modelValue:t(E),"onUpdate:modelValue":c[0]||(c[0]=l=>re(E)?E.value=l:E=l),placeholder:"reports/AAAaAaAAaa1aA1aA#fight=3",autocomplete:"on"},null,8,["modelValue"])]),_:1}),i(g,{label:"FF logs V1 Key",style:{width:"450px"}},{default:s(()=>[i(y,{modelValue:o.settings.api,"onUpdate:modelValue":c[1]||(c[1]=l=>o.settings.api=l)},null,8,["modelValue"])]),_:1}),i(g,{label:"添加TTS",style:{width:"100px"}},{default:s(()=>[i(C,{modelValue:t(m),"onUpdate:modelValue":c[2]||(c[2]=l=>re(m)?m.value=l:null)},null,8,["modelValue"])]),_:1}),i(g,null,{default:s(()=>[i(v,{disabled:t(T)==="正在请求",type:"primary",onClick:c[3]||(c[3]=l=>P(t(E)))},{default:s(()=>[w(O(t(T)),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),p("div",it,[i(q,null,{default:s(()=>[Y(i(te,{data:t(e).friendlies.filter(l=>l.icon!=="NPC"),stripe:"",border:"",class:"fflogs-query-result-friendlies-list"},{default:s(()=>[i(x,{prop:"name",label:"玩家名称","min-width":"60px"}),i(x,{prop:"server",label:"服务器","min-width":"60px"}),i(x,{label:"职业","min-width":"60px"},{default:s(({row:l})=>[w(O(t(U).nameToFullName(t(U).jobEnumToJob(t(U).iconToJobEnum(l.icon))).cn),1)]),_:1}),i(x,{label:"选定","min-width":"20px"},{default:s(l=>[i(v,{type:"primary",size:"small",onClick:n=>j(l.row)},{default:s(()=>[w("选择")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),[[G,t(e).abilityFilterEvents.length===0]])]),_:1}),Y(i(q,{class:"fflogs-query-result-friendlies-ability-filter-select"},{default:s(()=>[i(W,{span:20},{default:s(()=>[i(ne,{modelValue:t(e).abilityFilterSelected,"onUpdate:modelValue":c[4]||(c[4]=l=>t(e).abilityFilterSelected=l),multiple:"",placeholder:"技能过滤器","fit-input-width":!0},{default:s(()=>[(F(!0),B(D,null,M(t(e).abilityFilterCandidate,l=>(F(),k(ie,{class:"ability-filter-li",key:l.actionId,value:l.actionId,label:l.actionName},{default:s(()=>[p("img",{src:`https://cafemaker.wakingsands.com/i/${l.url}.png`,class:"ability-filter-li-icon",title:"",loading:"auto",onerror:`javascript:this.src='https://xivapi.com/i/${l.url}.png';this.onerror=null;`},null,8,nt),w(O(l.actionName),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(W,{span:4},{default:s(()=>[i(v,{type:"success",onClick:c[5]||(c[5]=l=>ee())},{default:s(()=>[w("选择好了")]),_:1})]),_:1})]),_:1},512),[[G,t(e).abilityFilterEvents.length>0]])])],64)}}});const ot=Ie(lt,[["__scopeId","data-v-cdf9e8a3"]]),V=S=>(Ke("data-v-0f0969e0"),S=S(),Qe(),S),st=V(()=>p("br",null,null,-1)),at=V(()=>p("br",null,null,-1)),rt={class:"slider-demo-block"},dt=V(()=>p("span",null,"模拟时间：",-1)),ct={class:"timeline-info-config"},ut=V(()=>p("span",null,"名称：",-1)),mt={class:"timeline-info-config"},pt=V(()=>p("span",null,"地图：",-1)),ft={class:"timeline-info-config"},yt=V(()=>p("span",null,"职业：",-1)),_t={class:"timeline-info-config"},gt=V(()=>p("span",null,"来源：",-1)),wt={class:"timeline-info-config"},bt=V(()=>p("span",null,"创建：",-1)),ht={style:{flex:"1"}},vt={style:{"max-height":"353px"}},Ft={class:"timeline-timeline-view"},Tt=V(()=>p("br",null,null,-1)),xt=V(()=>p("br",null,null,-1)),Ct=ge({__name:"timelineSettings",setup(S){const h=N(0),o=Ye(),b=fe(o,"allTimelines"),L=fe(o,"filters"),R=[{id:"0",name:"任意"}],T=N(!1),E=N(!1);let m=we({timeline:{name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}});const e=location.href.includes("OVERLAY_WS="),P=N([]);g();async function j(){P.value=[{time:0,action:"正在加载...",show:!0,windowBefore:0,windowAfter:0,alertAlready:!0}],P.value=await Ge(m.timeline.timeline)}const X=Ue(ye(()=>U.getBattleJobs2()),500,{maxWait:5e3});ee();function ee(){var l,n,_;for(const A in ae)if(Object.prototype.hasOwnProperty.call(ae,A)){const $=ae[A];switch($.contentType){case 4:case 5:case 28:R.push({id:A,name:((l=$.name)==null?void 0:l.cn)??((n=$.name)==null?void 0:n.ja)??((_=$.name)==null?void 0:_.ja)??A})}}x(),o.sortTimelines(),te()}function z(){callOverlayHandler({call:"broadcast",source:"soumuaTimelineSetting",msg:{store:o.$state}})}function d(){var l;(l=c({url:location.href}))!=null&&l.OVERLAY_WS?(z(),f.fire({title:"已尝试进行通信,请检查ACT悬浮窗是否接收",text:"若无法通信，可将本页面直接添加到ACT悬浮窗进行编辑，设置将会自动保存。（编辑后刷新一下时间轴网页）"})):f.fire({icon:"error",title:"目前与ACT断开了连接。",text:'请启用ACT OverlayPlugin WSServer，并使本页面url参数中的端口号与其保持一致：OVERLAY_WS=ws://127.0.0.1:端口号/ws"'})}function c({url:l}){const n=l.split("?").pop().split("&"),_={};return n.forEach(A=>{let $=A.split("=");_[$[0]]=$[1]}),_}function y(){T.value=!T.value,g()}function g(){h.value=-30,m.timeline={name:"空",condition:{zoneId:"0",job:"NONE"},timeline:"空",codeFight:"空",create:"空"}}function C(){m.timeline=o.allTimelines[o.newTimeline()],j()}function v(l){window.scrollTo({top:0,behavior:"smooth"}),m.timeline=l,j()}function u(l){f.fire({title:`确定要删除${l.name}吗？`,text:"这将无法撤回！",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确认删除",cancelButtonText:"取消"}).then(n=>{n.isConfirmed&&(g(),b.value.splice(b.value.findIndex(_=>_===l),1))})}function x(){o.loadTimelineSettings(),Reflect.deleteProperty(o.configValues,"refreshRateMs")}function te(){Re(()=>{o.saveTimelineSettings()},{flush:"post"})}function q(l){let n=new Pe(".export",{text:()=>JSON.stringify(l)});n.on("success",()=>{f.fire({position:"top-end",icon:"success",title:"复制成功，已写入剪切板。",showConfirmButton:!1,timer:1500}),n.destroy()}),n.on("error",()=>{f.fire("复制失败，请手动复制！",JSON.stringify([l])),n.destroy()})}function ie(){f.fire({title:"输入导出的字符串",input:"text",returnInputValueOnDeny:!0,showDenyButton:!0,denyButtonText:"覆盖",showConfirmButton:!0,confirmButtonText:"追加",showCancelButton:!0,cancelButtonText:"放弃"}).then(l=>{if(l.isConfirmed||l.isDenied)try{l.isDenied?f.fire({title:"这将丢失目前拥有的所有数据，你确定要覆盖吗？",showConfirmButton:!1,showDenyButton:!0,denyButtonText:"确定覆盖",showCancelButton:!0,cancelButtonText:"取消"}).then(n=>{n.isDenied&&(o.allTimelines.length=0,o.allTimelines.push(...JSON.parse(l.value)),o.sortTimelines())}):(o.allTimelines.push(...JSON.parse(l.value)),o.sortTimelines())}catch(n){f.fire({icon:"error",title:"Oops...",text:n})}})}const ne=ye(()=>(h.value<0?"-":"")+(Array(2).join("0")+(Math.floor(h.value/60)+(h.value<0?1:0))).slice(-2)+":"+(Array(2).join("0")+Math.floor(h.value%60)).slice(-2));function W(){m.timeline.timeline=m.timeline.timeline.replaceAll(new RegExp("(?<=^|^#\\s*)(?<time>[:：\\d.]+)","gm"),(l,n)=>/^\d+[::]\d+(?:\.\d{1,2})?$/.test(l.toString())?_e.duration("00:"+l.toString()).as("seconds").toString():_e.utc(parseFloat(l.toString())*1e3).format("mm:ss.S"))}return(l,n)=>{const _=he,A=je,$=ot,de=Ze,ce=He,ue=ze,K=qe,Se=Je,Q=be,me=Ce,pe=xe,le=Te,Ve=Xe,Z=ve,Ee=Fe,$e=Me,ke=Le,Ae=We;return F(),k(Ae,{class:"container"},{default:s(()=>[i(A,null,{default:s(()=>[i(_,{type:"primary",onClick:n[0]||(n[0]=a=>C())},{default:s(()=>[w("新建")]),_:1}),i(_,{onClick:n[1]||(n[1]=a=>y())},{default:s(()=>[w("从FFlogs导入")]),_:1}),i(_,{onClick:n[2]||(n[2]=a=>E.value=!t(E)),color:"#626aef",style:{color:"white"}},{default:s(()=>[w("样式设置")]),_:1}),i(_,{onClick:n[3]||(n[3]=a=>ie())},{default:s(()=>[w("导入")]),_:1}),i(_,{class:"export",onClick:n[4]||(n[4]=a=>q(t(b)))},{default:s(()=>[w("全部导出")]),_:1}),t(e)?(F(),k(_,{key:0,type:"success",onClick:n[5]||(n[5]=a=>d())},{default:s(()=>[w("通过WS发送到悬浮窗")]),_:1})):H("",!0)]),_:1}),i(ke,null,{default:s(()=>[t(T)?(F(),k($,{key:0,settings:t(o).settings,filters:t(L),onClearCurrentlyTimeline:g,onShowFFlogsToggle:n[6]||(n[6]=()=>T.value=!t(T)),onNewTimeline:t(o).newTimeline},null,8,["settings","filters","onNewTimeline"])):H("",!0),Y(i(K,{class:"box-card"},{default:s(()=>[i(ue,{title:"时间轴参数",size:"small",border:""},{default:s(()=>[(F(!0),B(D,null,M(t(o).configValues,(a,I,J)=>(F(),k(ce,{key:J,label:t(o).configTranslate[I],"label-align":"right",width:"16em"},{default:s(()=>[i(de,{min:0,step:.1,modelValue:t(o).configValues[I],"onUpdate:modelValue":oe=>t(o).configValues[I]=oe},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1}),st,i(ue,{size:"small",title:"时间轴样式",border:""},{default:s(()=>[(F(!0),B(D,null,M(t(o).showStyle,(a,I,J)=>(F(),k(ce,{key:J,label:t(o).showStyleTranslate[I],"label-align":"right",width:"16em"},{default:s(()=>[i(de,{min:0,step:.01,modelValue:t(o).showStyle[I],"onUpdate:modelValue":oe=>t(o).showStyle[I]=oe},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1},512),[[G,t(E)]]),at,Y(i(K,null,{default:s(()=>[p("div",rt,[dt,i(Se,{modelValue:t(h),"onUpdate:modelValue":n[7]||(n[7]=a=>re(h)?h.value=a:null),min:-30,max:1500,step:.1,"show-input":""},null,8,["modelValue"]),p("div",null,O(t(ne)),1)]),i(le,{class:"timeline-info"},{default:s(()=>[p("div",null,[p("p",ct,[ut,i(Q,{modelValue:t(m).timeline.name,"onUpdate:modelValue":n[8]||(n[8]=a=>t(m).timeline.name=a),class:"timeline-info-name"},null,8,["modelValue"])]),p("p",mt,[pt,i(pe,{modelValue:t(m).timeline.condition.zoneId,"onUpdate:modelValue":n[9]||(n[9]=a=>t(m).timeline.condition.zoneId=a),filterable:""},{default:s(()=>[(F(),B(D,null,M(R,a=>i(me,{key:a.id,label:a.name,value:a.id},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),p("p",ft,[yt,i(pe,{modelValue:t(m).timeline.condition.job,"onUpdate:modelValue":n[10]||(n[10]=a=>t(m).timeline.condition.job=a),required:"",placeholder:"职业"},{default:s(()=>[(F(!0),B(D,null,M(t(X),a=>(F(),k(me,{key:a,label:t(U).nameToFullName(a).cn,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),p("p",_t,[gt,i(Q,{modelValue:t(m).timeline.codeFight,"onUpdate:modelValue":n[11]||(n[11]=a=>t(m).timeline.codeFight=a),disabled:""},null,8,["modelValue"])]),p("p",wt,[bt,i(Q,{modelValue:t(m).timeline.create,"onUpdate:modelValue":n[12]||(n[12]=a=>t(m).timeline.create=a),disabled:""},null,8,["modelValue"])]),i(le,{"m-b-10px":""},{default:s(()=>[i(_,{span:12,class:"export",onClick:n[13]||(n[13]=a=>q([t(m).timeline]))},{default:s(()=>[w("单独导出")]),_:1}),i(_,{type:"primary",span:12,onClick:n[14]||(n[14]=a=>W())},{default:s(()=>[w("切换时间")]),_:1})]),_:1}),i(le,null,{default:s(()=>[i(_,{span:12,type:"danger",onClick:n[15]||(n[15]=a=>u(t(m).timeline))},{default:s(()=>[w("删除")]),_:1}),i(_,{span:12,onClick:n[16]||(n[16]=a=>g())},{default:s(()=>[w("隐藏编辑界面")]),_:1})]),_:1})]),p("div",ht,[i(Q,{class:"timeline-timeline-raw",modelValue:t(m).timeline.timeline,"onUpdate:modelValue":n[17]||(n[17]=a=>t(m).timeline.timeline=a),type:"textarea",rows:12,wrap:"off",placeholder:"请键入时间轴文本",style:{"max-width":"569px"},onChange:n[18]||(n[18]=a=>j())},null,8,["modelValue"])]),p("div",vt,[p("div",Ft,[i(Ve,{config:t(o).configValues,lines:t(P),runtime:t(h),"show-style":t(o).showStyle},null,8,["config","lines","runtime","show-style"])])])]),_:1}),Tt]),_:1},512),[[G,t(m).timeline.create!=="空"]]),xt,t(b).length>0?(F(),k(K,{key:1},{default:s(()=>[i(Ee,{data:t(b),style:{width:"100%"},stripe:""},{default:s(()=>[i(Z,{prop:"name",label:"名称"}),i(Z,{prop:"conditon",label:"地图",sortable:""},{default:s(a=>{var I;return[w(O((I=R.find(J=>J.id===a.row.condition.zoneId))==null?void 0:I.name),1)]}),_:1}),i(Z,{prop:"conditon",label:"职业"},{default:s(a=>[w(O(t(U).nameToFullName(a.row.condition.job).cn),1)]),_:1}),i(Z,{fixed:"right",label:"操作",width:"100"},{default:s(a=>[i(_,{onClick:I=>v(a.row),type:"primary",size:"small"},{default:s(()=>[w("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):H("",!0),t(b).length===0?(F(),k(K,{key:2},{default:s(()=>[i($e,{description:"点击上方新建或导入一个时间轴吧~"})]),_:1})):H("",!0)]),_:1})]),_:1})}}});const Bt=Ie(Ct,[["__scopeId","data-v-0f0969e0"]]);export{Bt as default};
