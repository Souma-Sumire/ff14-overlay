import{d as D,v as g,y as N,Y as I,o as m,b as x,C as S,aq as B,u,f as a,a0 as C,t as _,F as j,G as q,H as z,p as A,j as G,P as H}from"./vendor-052ff5d9.js";import{_ as M}from"./index-3f9abce8.js";const U=i=>(A("data-v-2ce19700"),i=i(),G(),i),O=U(()=>a("h2",null,"UTF8长度计算",-1)),P=U(()=>a("h2",null,_("<hex:02开头检测"),-1)),R=D({__name:"hexcode",setup(i){const f=g(""),y=g(0),d=N("hexcode",""),p=g([]);I(()=>{y.value=b(f.value)});function b(t){let e=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e+=1:l<2048?e+=2:l<65536?e+=3:l<2097152&&(e+=4)}return e}function V(t){let e=0;const s=[];for(;e<t.length;){const l=t.indexOf("<hex:02",e);if(l===-1)break;e=l+1;const E=t.slice(e+6,e+8),w=t.slice(e+8,e+10),$=parseInt(w,16),F=`指令${E} 长度${w}(${$})`;let n=0,v=0,c=!0,r=!0;for(;v<$;n++){const o=t[l+n+11],T=t.slice(l+n+11,l+n+11+5);if(o===void 0)break;if(o==="<"&&(c=!0,r=!1),!(c&&!r)){if(!(o===">"&&r)){if(!(o==="<"&&T==="<hex:")){const h=b(o);v+=c?h/2:h,console.debug(o,"+"+(c?h/2:h),`已数${v}`)}}}o===":"&&(r=!0),o===">"&&(c=!1,r=!1)}const k=t.slice(e+n+3,e+n+11),L=t.slice(e+10,e+10+n);s.push({passed:k.endsWith("03>"),over:k,msg:F,full:L})}return s}return I(()=>{p.value.length=0,d.value.split(`
`).forEach(t=>{const e=V(t);p.value.push(...e)})}),(t,e)=>(m(),x("main",null,[O,S(a("textarea",{name:"",id:"",cols:"100",rows:"5","onUpdate:modelValue":e[0]||(e[0]=s=>C(f)?f.value=s:null),wrap:"off"},null,512),[[B,u(f)]]),a("p",null,_(u(y)),1),P,S(a("textarea",{name:"",id:"",cols:"100",rows:"5","onUpdate:modelValue":e[1]||(e[1]=s=>C(d)?d.value=s:null),wrap:"off"},null,512),[[B,u(d)]]),a("article",null,[j(_(u(p).every(s=>s.passed)?"全部通过":"有错误")+" ",1),a("ul",null,[(m(!0),x(q,null,z(u(p),(s,l)=>(m(),x("li",{key:l},[a("span",{style:H({color:s.passed?"black":"red"})},_(`${s.passed?"通过":"错误"} ${s.msg} ${s.full}`),5)]))),128))])])]))}});const J=M(R,[["__scopeId","data-v-2ce19700"]]);export{J as default};
