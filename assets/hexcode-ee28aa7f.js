import{d as A,A as _,C as D,a0 as S,o as m,b as v,h as $,at as B,u as c,g as o,a3 as C,t as h,I as F,J as z,K as J,p as K,l as M,S as O}from"./vendor-46c1c52d.js";import{_ as R}from"./index-7e20d870.js";const U=u=>(K("data-v-76281199"),u=u(),M(),u),W=U(()=>o("h2",null,"UTF8长度计算",-1)),j=U(()=>o("h2",null,h("<hex:02开头检测"),-1)),q=A({__name:"hexcode",setup(u){const i=_(""),g=_(0),f=D("hexcode",""),d=_([]);S(()=>{g.value=x(i.value)});function x(t){let e=0;for(let s=0;s<t.length;s++){const l=t.charCodeAt(s);l<128?e+=1:l<2048?e+=2:l<65536?e+=3:l<2097152&&(e+=4)}return e}function V(t){let e=0;const s=[];for(;e<t.length;){const l=t.indexOf("<hex:02",e);if(l===-1||(e=l+1,t.slice(e-1,e+9)==="<hex:0203>"))break;const E=t.slice(e+6,e+8),b=t.slice(e+8,e+10),y=Number.parseInt(b,16),L=`指令${E} 长度${b}(${y})`;let a=0,w=0,p=!0,r=!0;for(;w<y;a++){const n=t[l+a+11],T=t.slice(l+a+11,l+a+11+5);if(n===void 0)break;if(n==="<"&&(p=!0,r=!1),!(p&&!r)){if(!(n===">"&&r)){if(!(n==="<"&&T==="<hex:")){const I=x(n);w+=p?I/2:I}}}n===":"&&(r=!0),n===">"&&(p=!1,r=!1)}const k=t.slice(e+a+3,e+a+11),N=t.slice(e+10,e+10+a);s.push({passed:k.endsWith("03>"),over:k,msg:L,full:N})}return s}return S(()=>{d.value.length=0,f.value.split(`
`).forEach(t=>{const e=V(t);d.value.push(...e)})}),(t,e)=>(m(),v("main",null,[W,$(o("textarea",{id:"","onUpdate:modelValue":e[0]||(e[0]=s=>C(i)?i.value=s:null),name:"",cols:"100",rows:"5",wrap:"off"},null,512),[[B,c(i)]]),o("p",null,h(c(g)),1),j,$(o("textarea",{id:"","onUpdate:modelValue":e[1]||(e[1]=s=>C(f)?f.value=s:null),name:"",cols:"100",rows:"5",wrap:"off"},null,512),[[B,c(f)]]),o("article",null,[F(h(c(d).every(s=>s.passed)?"全部通过":"有错误")+" ",1),o("ul",null,[(m(!0),v(z,null,J(c(d),(s,l)=>(m(),v("li",{key:l},[o("span",{style:O({color:s.passed?"black":"red"})},h(`${s.passed?"通过":"错误"} ${s.msg} ${s.full}`),5)]))),128))])])]))}});const Q=R(q,[["__scopeId","data-v-76281199"]]);export{Q as default};
